# IP 주소로의 여행



## 목차

- IP 주소 이야기 - 1탄
- 라우터에서 IP 주소 이해하기
- IP 주소 이야기 - 2탄
- IP 주소 이야기 - 3탄
- IP 주소의 활용
- 서브넷 마스크(Subnet Mask)의 시작
- 서브넷 마스크에도 기본은 있다
- 서브넷 마스크의 기본 성질
- 서브넷 마스크, 그 속으로...
- 서브넷 마스크에 대한 시험
- IP와 서브넷에 대한 정리



## IP 주소 이야기 - 1탄

IP 주소란 무엇일까요? 일상생활에도 많은 주소가 있습니다. 한번 생각해볼까요? 먼저 집주소같이 우편번호와 주소가 있고, 또 전화번호나 휴대폰 번호 같은 것들도 일종의 주소라고 볼 수 있습니다.  
그뿐만 아니라 주민등록번호도 있습니다. 이런 많은 주소는 몇가지 공통점이 있는데, 그건 서로 구분된다는 것입니다. 같으면 구분하기가 어렵기 때문에 서로 달라야 합니다.  
또 하나는 일정한 규칙이 있어야 한다는 겁니다. 전화번호도 앞쪽이 국번이 되고 뒤쪽이 번호가 되는 규칙이 있는 것처럼 말입니다.

TCP/IP라는 프로토콜을 만들 때 이 프로토콜을 사용하는 모든 장비들을 구분해주기 위해서 만들어낸 것이 바로 IP 주소입니다. 서로 간의 통신을 위해서는 이들을 구분할 주소가 필요했던 겁니다.  
원래 IP 주소를 만들 당시에는 이렇게 인터넷이 많이 보편화될 거란 생각을 하지 않았던 것 같습니다. 요즘은 공인 IP 주소를 따내기가 그리 쉽지 않은데, 그것은 공인 IP 주소의 한계 때문입니다.

IP 주소는 이진수 32자리로 되어 있습니다. 즉

0000 0000.0000 0000.0000 0000.0000 0000에서

1111 1111.1111 1111.1111 1111.1111 1111까지입니다.

따라서 전에도 한 번 말씀드렸지만 지정 가능한 전체 IP 주소의 개수는 약 2의 32승 개 정도밖에 되지 않는다는 겁니다.  
2의 32승이 몇 개냐구요? 2를 계속 32번 곱해보면 아마 답이 나올 겁니다. 대충은 42억 9,000개 나옵니다. 이 중에서 못쓰는 주소도 있으니까 사용 가능한 주소는 이것보다 좀 적을 겁니다.  
그런데 이 IP 주소가 이제 거의 다 나눠줘서 더 이상 나눠줄 게 별로 남지 않았다고 합니다. 약 6% 정도가 남았다고 하네요. 그럼 왜 중간중간에 점을 찍었냐고요? 그건 약속입니다. 또 구분하기 쉽도록 8자리마다 하나씩 점을 찍기로 한 겁니다.

예를 들어 203.240.120.1이라고 중간에 점이 찍힌 것을 보셨을 겁니다.

전에도 설명드렸지만 원래 이진수인 IP 주소를 그대로 사용하면 너무 어려우므로 좀 더 익숙한 십진수 방식으로 다시 고쳐서 사용하는 겁니다. (하지만 네트워크 엔지니어는 더 복잡해진 겁니다. 이진수를 십진수로 바꿔야 하니 말입니다.) 물론 컴퓨터는 이것을 이진수로만 이해하기 때문에 다시 이진수로 바꾸어 주어야 합니다.  
아무튼 십진수로 바뀐 IP 주소 역시 중간에는 점을 찍는데, 이진수로 8자리가 나타낼 수 있는 가장 큰 십진수는 255이기 때문에 (1111 1111)을 십진수로 바꾸어 보면 255가 나옵니다. (이해가 안 가는 분은 'PART 03 TCP/IP와의 만남'에서 다루는 이진수의 계산을 다시 한 번 읽어보면 금방 이해가 가실 겁니다.)  
8자리의 이진수를 묶어서 십진수를 만들고 중간에 점을 찍어주는 겁니다. 이 중간에 있는 점은 꼭 찍어 주어야하고 주의 사항은 맨 마지막에는 점을 찍지 않는다는 것입니다.

이진수 8자리마다 점을 찍기 때문에 이들 8개를 묶어서 '옥텟(Octet)'이라고 부릅니다. 그래서 IP 주소는 총 4개의 옥텟으로 나뉘는 겁니다. 4개의 옥텟이니까 32비트가 되는 겁니다.



## 라우터에서 IP 주소 이해하기

라우터가 물론 IP의 라우팅(일단 여기서는 라우팅이 경로 배경이라고만 알아두고 넘어가겠습니다.)만을 담당하는 건 아닙니다.  
예를 들어 IPX(노벨 파일 서버), AppleTalk(매킨토시) 등 많은 프로토콜의 라우팅을 할 수 있는데, 요즘은 IP를 제외한 나머지 프로토콜들은 거의 사용하고 있지 않답니다. 앞에서도 설명드렸지만 인터넷이라는 것이 IP 기반 위에서 움직이다 보니 다른 프로토콜들은 시간이 지나가면서 점차 사라지고 있는 추세입니다.  
하지만 우린 네트워크 엔지니어니까 IP 말고 다른 프로토콜이 있었고, 어떻게 사용되었다는 것 정도는 알아두어도 좋을 것 같습니다.

일단 우리가 조그만 네트워크를 꾸민다고 가정해 보겠습니다. 약 50대 정도의 PC, 그리고 그 PC들이 전용선을 통해 인터넷을 쓴다고 가정하겠습니다.  
전에 허브와 스위치에 대해서는 알아 봤습니다. 이번엔 우리가 라우터를 알아볼 차례니까 라우터에 IP 주소를 배정하는 규칙을 한번 알아보겠습니다. 물론 지금 하는 라우터의 구성은 우선 IP 주소를 이해하기 위해서 간단히 한번 맛보기만을 하는 거니까 부담은 안 가지셔도 됩니다.  
뒤에 가서 아주 지겹게 해볼 수 있을 겁니다.

![](./img/1-5/ex1.jpg)

위 그림의 오른쪽은 우리가 가장 많이 사용하는 라우터인 시스코 2501에서 실제 이더넷과 시리얼 인터페이스를 나타내고 있습니다.  
(무엇이 이더넷 인터페이스이고, 또 무엇이 시리얼 인터페이스인지, 그리고 인터페이스란 무엇인지는 앞으로 배울 라우터에서 자세히 다룹니다. 여기서는 일단 내부 네트워크에 연결되는 라우터의 포트를 이더넷 인터페이스라고 생각하시고 외부, 즉 인터넷쪽으로 연결되는 인터페이스를 시리얼 인터페이스라고 생각하면 됩니다.)

시스코 2501의 경우 이더넷 인터페이스는 1개이고, 인터넷과 접속하기 위한 시리얼 인터페이스는 2개입니다. 그리고 시리얼 인터페이스는 DSU 또는 CSU라는 전용선 모뎀에 연결됩니다.  
위와 같은 가정에서 우리가 라우터에 부여해야 하는 IP 주소는 두 개가 됩니다. 하나는 이더넷(Ethernet) 인터페이스에 부여할 주소이고, 또 하나는 시리얼(Serial) 인터페이스에 부여할 IP 주소입니다. 이더넷용 IP 주소는 우리가 내부에서 사용하기 위해 부여받은 IP 주소 중 하나를 배정해야 합니다.

이유는 아시죠? 즉 라우터의 이더넷쪽은 앞에서 말씀드린 대로 내부 네트워크에 접속되기 때문입니다. 예를 들어 우리가 내부 PC용으로 부여받은 주소가 203.120.150.1~203.120.150.255 까지라면 라우터의 주소는 그 중 하나, 이럴 때는 보통 맨 앞의 번호를 씁니다. (제일 중요하니까요.) 그래서 라우터의 이더넷 주소는 203.120.150.1 이 부여되는 겁니다.

이때 주의할 점은 이렇게 라우터에 부여한 주소는 또 다시 PC에 부여하면 안 된다는 겁니다. 다 아시는 내용이죠? 그건 모든 PC에서도 마찬가지입니다.  
절대로 같은 IP 주소를 갖는 PC가 있으면 안 되기 때문입니다. 만약에 라우터에 부여한 주소를 PC에 또 써서 두 IP 주소가 충돌이 발생하는 경우는 라우터의 역할을 제대로 수행할 수 없습니다.

그럼 시리얼(Serial)에는 어떤 주소를 부여해야 할까요?

그건 우리 마음대로 부여할 수 있는 게 아닙니다. 라우터가 접속하는 상대편(ISP 업체) 라우터의 시리얼 인터페이스와 IP 주소를 서로 맞추어야 하기 때문입니다. 일단은 우리 내부용 IP 주소와는 다른 네트워크가 됩니다.  
당연하죠. 나중에 배우겠지만 라우터에서 인터페이스가 달라지면 그건 네트워크가 달라진다는 것을 의미합니다. 상대편 라우터의 시리얼과는 같은 네트워크가 되어야 합니다.

예를 들어볼까요?

상대편 라우터의 시리얼이 203.150.150.5에 서브넷 마스크가 255.255.255.252라면 우리 라우터의 Serial은 203.150.150.6에 서브넷 마스크는 255.255.255.252가 되는 겁니다. (일단 서브넷 마스크는 서로 같아야 합니다. 이것은 나중에 다시 배울 겁니다.)  
이해가십니까? 이번에 이해 안 가신다고 너무 걱정하실 건 없습니다. 다음에 이 부분은 자세히 설명할 겁니다.



## IP 주소 이야기 - 2탄

앞에서 알아본 것처럼 IP 주소는 32자리 2진수로 구성되어 있습니다. 그럼 이번 시간에는 먼저 '네트워크 부분(Network Part)'과'호스트 부분(Host Part)'이란 말이 무엇인지를 알아보도록 하겠습니다.

여기서 말하는 네트워크는 하나의 브로드캐스트 영역(Broadcast Domain)이라고 생각하면 됩니다. 더 어렵다구요? 무슨 말이냐면 하나의 PC가 데이터를 뿌렸을 때 그 데이터를 라우터를 거치지 않고도 바로 받을 수 있는 영역이란 뜻입니다.

예를 들어볼까요?

A라는 게임방에서 한 PC가 데이터를 그 게임방 안에 있는 다른 PC에게 전송한다면 그 데이터는 라우터를 거치지 않고 바로 전달이 가능합니다. 왜냐하면 두 PC는 같은 네트워크 영역(즉 네트워크 부분이 같다는 겁니다.) 안에 있기 때문입니다.  
하지만 A라는 게임방에 있는 PC가 인터넷의 어떤 PC(예를 들면 외국에 있는 PC나 서버)에 데이터를 보낸다면 그건 라우터를 거치지 않고는 전달이 불가능합니다. 왜냐하면 두 PC가 같은 네트워크상에 있지 않기 때문입니다. (이 경우 두 PC의 네트워크 부분은 서로 다릅니다.) 아마 전에 설명드린 ARP를 기억하는 분은 금방 이해되실 겁니다.  
전에도 라우터가 브로드캐스트 영역을 나누는 역할을 한다고 말씀드렸죠? 따라서 한 브로드캐스트 영역 안에 있는 두 PC는 라우터 없이도 통신이 가능하지만 그렇지 않은 경우에는 라우터를 꼭 거쳐야 한다는 겁니다.

이야기가 좀 길어졌습니다. 아무튼 '한 네트워크'란 용어의 정의는 하나의 브로드캐스트 영역이란 말인 동시에 라우터를 거치지 않고도 통신이 가능한 영역이란 뜻이 됩니다.

그럼 호스트란 말은 무엇일까요?

말뜻 그대로 주인이란 의미가 이니고 그냥 각각의 PC 또는 장비라고 생각하면 됩니다. 이렇게 네트워크와 호스트를 설명드리는 이유는 IP 주소가 보기에는 그냥 점 3개로 나누어진 4자리 숫자 같지만, 사실 IP 주소 자체는 네트워크 부분과 호스트 부분으로 나누어져 있습니다.

따라서 어떤 네트워크에서든지 '하나의 네트워크'에서는 네트워크 부분은 모두 같아야 되고 호스트 부분은 모두 달라야 정상적인 통신이 일어난다는 겁니다.

예를 들어볼까요? 한 사무실에서 50대의 PC가 한 라우터를 통해 연결되어 있다면(좀 더 정확히 표현하자면 한 라우터에 하나의 인터페이스란 표현이 맞을 겁니다. 왜냐하면 하나의 라우터에도 여러 개의 인터페이스가 있으니 말입니다.) 이 PC들은 모두 같은 네트워크상에 있다고 말합니다. (기억나시죠? 동일한 브로드캐스트 영역입니다.) 따라서 이 PC들의 IP 주소 중에서 네트워크 부분은 모두 같아야 합니다.  
그래야 라우터를 거치지 않고 서로 통신하는 것이 가능합니다. 하지만 호스트 부분은 서로 모두 달라야 합니다. 만약 호스트가 같으면 두 PC는 서로 IP 주소 충돌이 생겨서 통신이 불가능하게 됩니다. 마치 각 지방별로 전화번호를 나눌 때 한 지역의 지역번호는 모두 같고(예를 들어 전북 지역의 모든 전화번호에서 지역번호는 063으로 모두 같습니다.) 전화번호는 서로 다른 것과 마찬가지입니다.

좀 더 구체적으로 예를 들어보면 한 PC방에서 쓰는 IP 주소가 203.240.100.1ㅇ네서 203.240.100.255까지라면 이 중에서 203.240.100부분은 네트워크 부분입니다. (네트워크 부분에 대한 내용은 뒤에서 배웁니다. 확실한 건 마음대로 네트워크 부분을 정하는 건 아니고 규칙이 있다는 겁니다.)  
따라서 이 PC방에서 쓰는 모든 IP 주소 중 이 부분은 모두 동일해야 한다는 겁니다. 그렇지 않으면 통신이 불가능해집니다. 또하나 호스트 부분은 맨 마지막 자리(마지막 옥텟)가 됩니다. 따라서 1에서 255가 바로 호스트 부분이 되는 겁니다.  
이해가 가시죠? (아직 이해가 안 가셔도 됩니다.) 호스트 부분 1에서 255까지는 모든 PC가 서로 달라야 합니다.

아래 그림을 보면 2번 네트워크에 속한 두 대의 PC와 라우터의 인터페이스는 모두 같은 네트워크 부분, 즉 2를 가지고 있습니다. 하지만 호스트 부분(다른 말로는 '노드 부분'일아고도 합니다.)은 서로 다릅니다.  
이 호스트 부분은 같은 네트워크에서는 반드시 서로 달라야 합니다. 하지만 서로 다른 네트워크에서는 호스트 부분이 서로 같아도 됩니다. (1번 네트워크에서도 호스트 부분에 1이 있는 것 보이죠?)  
또한 여기서는 IP 주소 형식 대신 알아보기 쉽도록 중간에 점 하나만 찍는 약식 포맷을 사용했습니다. (원래는 이런 형식은 없습니다.) 또 하나 알아두셔야 할 내용은 IP 주소 중에 네트워크 부분만이 라우터가 라우팅을 할 때 참고하는 부분이라는 겁니다.

![](./img/1-5/ex2.jpg)



## IP 주소 이야기 - 3탄

