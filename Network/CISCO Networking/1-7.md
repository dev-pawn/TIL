# 라우터만 알면 네트워크 도사?



## 목차

- [라우터를 한마디로 말하자면...](#라우터를-한마디로-말하자면---)
- [라우터는 무슨 일을 할까요?](#라우터는-무슨-일을-할까요-)
- [라우터는 어떻게 생긴 녀석일까요?](#라우터는-어떻게-생긴-녀석일까요-)
- [라우팅 프로토콜과 라우티드 프로토콜](#라우팅-프로토콜과-라우티드-프로토콜)
- [스태틱(Static) 라우팅 프로토콜과 다이내믹(Dynamic) 라우팅 포로토콜](#스태틱static-라우팅-프로토콜과-다이내믹dynamic-라우팅-프로토콜)
- 라우팅 테이블에 대한 이야기
- AS, 그리고 내부용과 외부용 라우팅 프로토콜
- 라우터 구성의 시작
- 라우터의 중요한 몇 가지 모드
- 라우터 안에는 어떤 것들이 살까요?
- 내가 가진 라우터의 현재 정보는 모두 이곳에!
- 라우터 셋업 모드
- 라우터에 명령을 입력하는 두 번째 방법
- 스태틱(Static) 라우팅을 이용한 라우터 구성
- 스태틱 라우팅만 알면 디폴트 라우트는 식은 죽 먹기
- 라우터의 구성 명령에 대한 버전별 정리
- 디스턴스 벡터(Distance Vector)와 링크 스테이트(Link State)
- 라우터의 패스워드 구성
- 시스코 라우터의 친구 찾기 CDP
- 텔넷(Telnet)을 이용한 장비 접속
- 핑(Ping)과 트레이스(Trace)



## 라우터를 한마디로 말하자면..

여기에서는 라우터에 대해서 분격적으로 알아보도록 하겠습니다.

전에도 라우터에 관한 내용은 몇 번 다루었고, 또 그동안 IP 주소와 서브넷 마스크에 대한 내용을 완벽하게 끝냈으니 이제 본격적인 라우터 공부를 하는 것이 가능하겠죠?

앞에서도 몇 번 말씀드린 적이 있지만, 네트워크를 하는 사람이 가장 자주 만나는 장비는 바로 이 라우터라는 장비입니다. 인터넷을 사용하기 위해서, 서로 다른 네트워크 간 통신하기 위해서, 그리고 브로드캐스트 영역을 나눠주기 위해서 꼭 필요한 이 라우터는 여러분이 네트워크에 입문하게 된다면 가장 자주 만나는 장비 중 하나가 될 것입니다.

우선 이번 시간에는 라우터란 장비에 대해 알아보도록 하겠습니다.

라우터란, 한마디로 '지능을 가진 경로 배정기'라고 말할 수 있습니다.

지능을 가진 경로 배정기란 말은 라우터는 자신이 가야 할 길을 자동으로 찾아서 갈 수 있는 능력을 가진 것을 말합니다. 즉 외부의 어떤 인터넷 사이트를 찾아가는 데이터가 있다면 라우터는 이 데이터를 목적지까지 가장 빠르고 효율적인 길을 스스로 찾아 안내해 주는 능력을 가지고 있습니다.

참 좋은 장비죠?

물론 라우터에 아무것도 해주지 않았는데도 이러한 기능이 수행되는 것은 아닙니다. 라우터에 어떤 세팅을 해줘야 좋은 길을 가장 빨리 찾아갈 수 있습니다.

그럼 그 세팅은 누가 해야 할까요?

바로 여러분입니다.

이런 라우터의 세팅을 제대로 알기 위해서는 라우터에서 쓰이는 명령어 몇 줄을 아는게 중요하지는 않습니다. 계속 공부하면서 배우시겠지만 라우터에서 사용하는 명령어는 라우터의 제조회사에 따라 모두 다르기 때문에 모든 명령어를 안다는 것은 불가능하고 또 그럴 필요도 없습니다.

우리가 알아야 하는 것은 바로 네트워크에 대한 개념입니다. 즉 네트워크의 IP 주소에 대한 이해, 서브넷 마스크에 대한 이해, 라우팅에 대한 이해 등입니다.

라우터가 물론 IP 라우팅만을 하는 것은 아닙니다. 예를 들어 IPX, DECNET, AppleTalk 등 많은 프로토콜의 라우팅이 있지만, 우선 여기에서는 IP 라우팅을 위주로 알아보도록 하겠습니다.

일단 우리가 사용할 라우터는 시스코 라우터로 하겠습니다. 시스코 라우터가 전 세계 인터넷의 80% 이상을 차지하고 있는 세계 제일의 라우터이기도 하지만, 일단 제가 써본 것이고 제일 많은 질문을 받는 것이므로 이 라우터를 위주로 설명하겠습니다.



## 라우터는 무슨 일을 할까요?

우선 라우터가 도대체 어떤 일을 하는지 하나하나 알아보도록 하겠습니다. 만약 어떤 사람이 여러분에게 라우터가 무슨 일을 하는 장비냐고 묻는다면 여러분은 이렇게 말씀하시면 됩니다.

"라우터는 두 가지 일을 하는데, 그 하나가 Path Determination(경로 결정)이고, 또 하나는 Switching(스위칭)입니다."

이 말은 어떻게 보면 상당히 교과서적인 말이면서 어렵게 느껴지는 말이기도 하지만, 결국 여러분이 라우터를 전부 이해한 다음에 이 말을 다시 한 번 읽어본다면 그땐 아마 이해가 될 겁니다.  
라우터는 데이터 패킷이 목적지까지 갈 수 있는 길을 검사하고 어떤 길로 가는 것이 가장 적절한지를 결정합니다. 이것을 '경로 결정'이라고 말합니다. 그리고 그 길이 결정되면 그쪽으로 데이터 패킷을 스위칭해 줍니다. 이것을 '스위칭'이라고 합니다. (여기서 스위칭은 스위치가 해주는 일과는 다릅니다.)

그럼 라우터는 어떻게 가장 좋은 길을 찾아가는 것일까요? 이 라우터란 녀석도 나름대로 계산을 합니다. 어디로 가는 것이 가장 빠른 길일까, 어디로 가는 것이 가장 안전한 길일까 하고 말입니다.  
이렇게 라우터가 가장 좋은 길을 찾는 데는 라우팅 알고리즘, 즉 라우팅 프로토콜이 사용됩니다. 그리고 라우팅 알고리즘은 이를 위해서 라우팅 테이블이란 것을 만들어서 관리합니다.  
즉 라우팅 테이블에는 어디로 가려면 어떻게 가라는 지도 정보가 들어있는 겁니다. (아직 라우팅 알고리즘이 무언지, 그리고 라우팅 테이블은 또 뭔지 아실 필요는 없습니다.) 이러한 라우터의 기능을 위해서 라우터는 PC처럼 CPU(중앙 처리장치)도 가지고 있고, 메모리도 가지고 있고, 또 인터페이스도 가지고 있습니다.



> 알고 갑시다!

여기에서의 결론은!

라우터는 경로 결정과 스위칭을 하는 장비인데, 가장 좋은 경로를 결정하기 위해서 라우팅 알고리즘을 사용하고 이런 라우팅 알고리즘은 라우팅 테이블을 만들어서 관리한다.



## 라우터는 어떻게 생긴 녀석일까요?

이번에는 도대체 라우터가 어떻게 생겼는지 한번 알아보도록 하겠습니다. 라우터는 정말 종류도 많고 가격대도 다양합니다. 싼 것은 몇십 만 원에서부터 비싼 것은 몇억 원짜리도 있으니까 말입니다.

우리가 보통 사용하는 중소 규모의 사무실이나 게임방용 라우터들은 아래 그림에 있는 라우터들이 대부분입니다. 물론 이외에도 대형 회사의 센터 장비라든지, 아니면 ISP(인터넷 서비스 제공업체)들에서 사용하는 라우터는 크기가 훨씬 더 큰 라우터들도 많습니다.

보통 라우터의 앞쪽에는 램프(전원 램프, 상태 표시 램프, 링크 표시 램프 등)들이 있고, 뒤에는 직접 케이블을 연결할 수 있게 되어 있습니다. 따라서 라우터를 구매하실 때는 라우터 그 자체도 중요하지만, 여기에 들어가는 케이블도 꼭 챙기셔야 합니다.  
예를 들어 콘솔 케이블이나 아니면 라우터 DSU(전용선 모뎀이라고 생각하면 됩니다.)를 연결해주는 케이블 같은 것 말입니다.(V.35 케이블 등), 처음에 라우터를 세팅하러 가는 분들은 라우터 그 자체에 너무 신경을 쓰셔서 이런 것을 꼭 빼먹는 경우가 있습니다.

라우터는 살 때 일체형으로 이미 구성이 되어 있는 단독형과, 껍데기만 산 다음에 자기가 필요한 모듈들을 하나하나 꽂아서 쓸 수 있는 모듈형이 있는데 생각하는 대로 나중에 네트워크가 더 확장될 가능성이 있어서 라우터가 필요할 경우에는 모듈형이 적합하고, 구입 후 증설이나 확장 없이 사용할 거라면 단독형이 더 적합합니다. 게임방 같은 곳에서는 단독형이 적당하겠죠?

라우터의 가격은 대부분 성능과 지원되는 인터페이스의 숫자, 그리고 지원하는 기능에 따라 달라집니다. 물론 메이커에 따라서도 가격 차이가 있습니다. 가전제품과 비슷하니까 금방 이해가실겁니다.  
다시 말해서 라우터의 가격은 소프트웨어와 하드웨어로 나누어지는데, 시스코에서는 이렇게 라우터에 들어가는 소프트웨어를 'IOS(Internetwork Operating System)' 라고 합니다.  
이 소프트웨어에는 어떤 라우팅 프로토콜을 지원할 것인지, 어떤 보안 기능을 가질 것인지, 그리고 어떤 편리성을 제공할 것인지 등 다양한 라우터의 운용에 관한 내용이 들어있습니다. 따라서 IOS별로도 가격차가 꽤 많이 납니다.

소프트웨어에는 별로 가격 개념이 없어서인지 장비를 살 때는 아깝지가 않는데 소프트웨어를 살 때는 조금 아깝다는 생각이 드는 분이라면 라우터를 사실 때도 고민하게 될 겁니다. 어떤 경우에는 라우터 자체보다 운영체제, 즉 소프트웨어의 값이 더 비쌀 수도 있으니까 말입니다.

또 하드웨어의 경우에는 여러 가지 모델이 있고 앞에서 말씀드린 것처럼 자신의 현재 네트워크와 앞으로의 미래를 예측해서 가장 적합한 라우터를 찾는 것이 중요합니다. 물론 비싸고 좋은것을 사면 좋겠지만, 어차피 성능이란 것은 자신에게 가장 맞는 게 최고일 뿐만 아니라 무조건 비싸다고 좋은 것은 아니기 때문입니다.

이제 여러분은 라우터를 사진으로라도 보셨으니까 다음에 이런 녀석들을 만나면 아마 한눈에 알아볼 수 있을 겁니다.

![](./img/1-7/ex1.jpg)

그림에서 맨 왼쪽 위에 있는 시스코 2500이라고 하는 녀석이 라우터 중에서는 가장 유명한 녀석입니다. 제일 많이 팔린 녀석이기도 하고 말입니다. 시스코 2500 모델은 주로 작은 회사나 게임방 등 사용자 수가 약 몇백 명 정도인 곳을 연결하는 데 적합합니다. (물론 사용자 수는 사용 프로그램과 사용 환경에 따라 크게 달라질 수 있습니다.) 이런 2500 시리즈 라우터들을 아까 말씀드린 단독형이라고 볼 수 있는 겁니다.  
하지만 2500 라우터는 나온 지 너무 오래된 라우터라서 기능이 많이 떨어집니다. 그래서 몇 년 전 단종되어 더 이상 판매를 하지 않습니다. 따라서 시중에 돌아다니는 2500 시리즈 라우터는 중고 장비라고 보시면 됩니다.

2500 시리즈의 아래에 보이는 라우터가 중소 규모의 지사에 적당하도록 만들어진 ISR 4000 라우터입니다. ISR은 'Intergrated Services Router'의 약자로, 우리말로 하면 라우터에 여러 가지 서비스 기능을 추가했다는 의미인데, 현재 ISR 라우터는 1세대 G1과 2세대 G2를 거쳐 4000 시리즈까지 발전했습니다.  
ISR 4000 또는 ISR 4K 라우터는 요즘 네트워크에서 꼭 필요한 기능인 보안, 음성 지원, 무선뿐만 아니라 서버 기능까지 갖추고 있어 필요에 따라 라우터에 장착된 서버를 이용해서 우리 회사에 필요한 가상의 기능을 만들어 줄 수도 있답니다.  
이렇게 되면 중소 규모의 지사에는 라우터, 스위치, 서버, 보안 방화벽 등을 따로 두지 않고도 ISR 4K 라우터 한 대만 있으면 모든 게 다 해결되겠죠?

그 아래 보이는 라우터는 ASR 라우터 시리즈로, 주로 대형 SP(Service Provider) 네트워크나 대기업용 라우터로 사용되면서도 강력한 보안 기능과 다양한 서비스를 제공해주는 라우터입니다.

오른쪽 위에 보이는 ASR(Aggregation Services Router) 9000 시리즈 라우터는 ASR 1000 시리즈 라우터보다 한 단계 높은 급의 라우터입니다.  
이미 더 이상 판매하지 않지만 아직도 대형 라우터로 기억되고 있는 시스코 7600 시리즈 라우터를 계승한 동급 라우터라고 생각하시면 되는데요, 아무래도 최신형 라우터이다 보니 7600 라우터에 비해서는 훨씬 더 빠르고 강력한 라우팅을 제공할 뿐만 아니라 다양한 기능을 가지고 있어 대형 라우터가 사용되는 기업이나 학교, 관공서 등의 코어 라우터로 적합한 장비랍니다. (보통 코어 라우터, 또는 코어 스위치와 같이 '코어'라고 부르는 장비는 네트워크의 가장 중앙에서 핵심 역할을 하는 장비를 말합니다.)  
이렇게 중요한 역할을 하는 라우터이다 보니 절대 문제가 생겨서는 안 되기 때문에 안정성이 굉장히 중요하구요, 또 그만큼 가격도 비쌉니다.

오른쪽 아래에 있는 NCS 라우터(Network Convergence System Series Router)는 현재 시스코에서 나오고 있는 라우터 중 가장 사양이 높은 라우터 시리즈입니다.  
NCS 시리즈 라우터는 다시 NCS 2000, NCS 4000, NCS 6000 시리즈 라우터로 구분되는데, 이미 짐작하시는 대로 가장 숫자가 큰 NCS 6000 라우터가 제일 큰 라우터입니다.  
이 라우터는 슬롯당 최고 2테라 바이트의 속도를 낼 수 있는 최상급 라우터이고, 사용 환경에 따라 NCS 6000 라우터를 최대 16까지 붙여서 마치 한 대의 라우터처럼 사용할 수도 있게 구성이 가능합니다. 이런 구성을 '멀티샤시 구성'이라고 하는데, 이렇게 해서 최고 256테라의 속도가 가능하게 되는 겁니다.  
물론 라우터는 속도만 중요한 게 아니랍니다. NCS 6000 라우터와 같이 네트워크의 핵심이 되는 코어 라우터의 경우는 무엇보다도 안정성이 중요합니다.  
그렇겠죠? 빠르게 처리하다가 그냥 다운이 되어버린다거나, 장애 하나 생겼다고 모든 처리가 멈춰버린다면 큰 문제가 생기니 말입니다. 따라서 이와 같은 코어 라우터의 경우 다양한 장애 대비책이 만들어져 있고, 심지어 소프트웨어를 업그레이드한다거나 한쪽에서 장애가 발생하는 경우라고 하더라도 라우터는 서비스를 계속 할 수 있도록 디자인되어 있습니다.  
그러고 보니 지금 설명드리는 NCS 6000 라우터는 지난번에는 아예 설명조차 드리지 않았던 라우터였네요. 그때 설명드렸던 CRS-1 라우터는 이제 CRS-3 라우터에 이어 CRS-X(보통 CRS 10이라고 합니다.)까지 진화하고 있습니다.

그런데 이처럼 성능이 높은 라우터들이 계속 나오는 이유는 뭘까요? 그건 바로 우리가 사는 환경, 특히 네트워크 환경이 계속 변화하기 때문일 겁니다. 요즘 많이 들어본 듯한 네트워크의 트렌드를 잠깐 생각해볼까요? 우선 모바일 환경으로의 변화일 겁니다.  
이 책을 처음 썼을 때만 해도 인터넷은 그저 커다란 데스크톱 컴퓨터에 케이블을 연결해서 사용하거나, 좀 앞서가는 사람들이라면 노트북을 들고 다녔던 게 전부일 겁니다. 하지만 이제 인터넷을 쓸 때 가장 많이 사용하는 장비는 다른 아닌 휴대폰이죠?  
휴대폰, 태플릿, 그리고 노트북 등 이런 장비들을 바로 '모바일 장비'라고 한답니다. 또 다른 변화는 트래픽의 변화일 겁니다. 전에는 주로 텍스트 위주로 전송되던 인터넷의 데이터가 어느 순간부터 음성과 비디오 형태로 바뀌기 시작했습니다.  
이제 뉴스도 인터넷에서 생방송으로 시청이 가능하고, 왠만한 야구 중계도 전부 인터넷을 통해 볼 수 있는 시대인 걸 보면 인터넷 속도와 성능이 몇 년 전에 비해 얼마나 발전했는지를 알 수 있습니다.  
이런 비디오 트래픽은 앞으로도 점점 더 많아질 것이라고 전망하고 있으니 당연히 네트워크 장비들도 이를 처리할 수 있어야 하겠죠? 그 밖에도 한 번쯤 들어보셨을지 모르는 IoT(Internet of Things)와 빅데이터 같은 트렌드 역시 더 빠르고 성능 좋은 네트워크 장비가 필요해진 이유가 되었답니다.

가격이요? 가격은 당연히 매우 비쌀 겁니다.

이런 종류의 라우터는 일반 기업이나 학교보다는 '서비스 프로바이더(SP)라고 부르는 KT나 SKT 같은 곳에서 사용하거나, 대형 인터넷 포털에서 사용한답니다.



> 네트워크 플러스

### 라우터를 만지는 사람들이 자주 쓰는 말

라우터를 만지다 보면 자주 듣는 말이 있습니다. 꼭 만지지 않더라도 자주 나오는 몇 가지 말의 의미를 알아두면 이해가 쉬울 겁니다.

일단 '인터페이스'란 말이 있습니다.

인터페이스란, 라우터에 나와있는 접속 가능한 포트라고 생각하면 됩니다. 예를 들어 Cisco 2501이란, 라우터의 인터페이스는 1 Ethernet(이더넷)과 2 Serial(시리얼)이라고 합니다. 여기서 나오는 Ethernet(이더넷)과 Serial(시리얼)은 나중에 다시 설명드리겠습니다. 아무튼 이 라우터는 3개의 접속 포트가 있다는 뜻입니다. 즉 3군데와 붙일 수 있다는 뜻이 됩니다.

그럼 또 'Ethernet'이니, 'Serial'이니 하는 말은 무슨 의미일까요?

Ethernet은 많이 들어보셨죠? Ethernet은 내부 네트워크와 접속할 때 사용하는 인터페이스입니다. 즉 내부의 허브나 스위치 등과의 연결을 위한 포트입니다. (물론 내부 네트워크가 토큰링일 경우에는 토큰링 인터페이스가 필요하지만, 여기서는 일반적인 이더넷을 예로 들었습니다.) 인터페이스 Type은 TP(RJ45)나 AUI(15핀) 방식이 있습니다.

TP는 10Base T 방식을 말하고 AUI는 15핀으로 된 방식입니다. (Cisco 2501은 이더넷 인터페이스 방식이 AUI입니다. 따라서 요즘 많이 쓰는 UTP 케이블과 연결하기 위해서는 AUI-to-TP 트랜시버가 필요합니다. 이를 MAU(Media Access Unit)라고도 합니다.)

![](./img/1-7/ex2.jpg)

시리얼(Serial)은 WAN과의 접속을 위한 거라고 생각하면 됩니다. 즉 DSU(Digital Service Unit 또는 Data Service Unit이라고 합니다.)와의 접속을 위한 것입니다. 물론 FDSU, CSU 등과의 연결도 마찬가지입니다. 즉 외부 네트워크('리모트 구간'이라고도 합니다.)로의 연결을 위해서 사용하는 포트가 바로 Serial 포트입니다. 간혹 'WAN 포트'라고도 합니다.

또한 Serial 포트가 있는 경우에는 Serial 포트와 DSU, FDSU, CSU 등과 연결하기 위한 케이블이 하나 필요한데, 이 케이블이 바로 V.35 케이블입니다. 라우터를 구매하실 때는 이 케이블까지 구매하셔야 합니다. 이 케이블이 없으면 라우터와 DSU와의 연결이 불가능합니다.

참! DSU는 아시죠? 그냥 전용선용 모뎀 정도라고 생각하면 되는데, 속도나 방식에 따라 DSU, FDSU, CSU 등으로 부르고 모양은 다 비슷합니다. 옛날 학교 다닐 때 들고 다니면 납작한 도시락 모양이고, 색깔은 흰색이나 회색, 검은색입니다. 불이 들어오는 구멍이 여러 개 있어서 깜빡깜빡 거립니다. 이 장비의 한쪽은 전용선에 연결하게 되고, 다른 한쪽은 라우터에 연결하는 겁니다.



> 알고 갑시다!

인터페이스는 라우터의 접속 포트를 말한다.  
Ethernet 포트는 내부 네트워크, 즉 랜(LAN)을 위한 접속 포트이며, Serial 포트는 외부 네트워크(인테넛 또는 원격지) 접속을 위한 포트로, DSU/CSU와 연결한다.



요즘 나오는 라우터 중에서는 라우터 안에 이미 DSU/CSU 기능을 내장하고 있는 것들이 있습니다. 이러한 라우터는 따로 DSU/CSU 등을 살 필요가 없을 뿐만 아니라 케이블도 절약됩니다. 하지만 개인적으로 이런 라우터를 선호하진 않습니다.  
우선 DSU나 CSU는 여러 제조사의 제품이 있는데, 물론 표준을 따르고 있지만 간혹 제품끼리의 호환에 문제가 있어서 둘 사이의 접속이 안 되는 경우가 있습니다. DSU/CSU를 내장하고 있지 않은 라우터의 경우는 DSU/CSU만 교체해주면 되지만, 내장형 라우터의 경우는 방법이 없기 때문입니다. 따라서 현재 우리나라에서는 이처럼 DSU/CSU 내장형 라우터는 그리 많이 사용하고 있지 않은 추세입니다. 이런 것도 알아두면 도움이 되겠네요.

![](./img/1-7/ex3.jpg)\

위 그림에서는 시스코 라우터 2501의 뒷면을 보여주고 있습니다. 여기에서 우리는 이더넷 인터페이스와 시리얼 인터페이스가 있다는 것을 알 수 있습니다. 만약 전용선으로 인터넷을 쓴다고 가정하면 시리얼 인터페이스에 V.35 케이블을 연결한 후 이 케이블을 다시 DSU/CSU로 연결하고, 전화국에서 들어온 전용선도 DSU/CSU에 연결하게 됩니다. 라우터 위에 보이는 것이 바로 DSU입니다.



## 라우팅 프로토콜과 라우티드 프로토콜

우리가 라우터를 하다 보면 여러 가지 비슷한 말을 많이 만나게 되고, 이것이 혼동되기 시작하면서 라우터가 어렵다는 이야기를 많이 하게 되는데, 그중에 하나가 바로 이 '라우팅 프로토콜'과 '라우티드 프로토콜'이 아닐까 합니다.

지금까지 우리가 배웠던 TCP/IP와 IPX, AppleTalk 등 우리가 아는 모든 프로토콜은 전부 라우티드 프로토콜입니다. 라우티드 프로토콜(Routed Protocol)이란, 말 그대로 라우팅을 당하는, 즉 라우터가 라우팅을 해주는 고객을 뜻합니다.  
라우터라는 자동차를 타고 여행을 떠나는 승객이라고 생각하면 됩니다. 그러니까 TCP/IP나 IPX는 고객으로서 라우터라는 자동차를 타고 다른 네트워크로 여행을 떠나는 겁니다.

그렇다면 라우팅 프로토콜(Routing Protocol)은 그 자동차를 안전하고 빠르게 운전하는 운전기사라고 볼 수 있습니다. 즉 라우터에 살면서 라우티드 프로토콜들에게 목적지까지 가장 좋은 길을 갈 수 있게 해주는 역할을 합니다.

따라서 라우터 입장에서는 어떤 운전기사(라우팅 프로토콜)를 채용하는가에 따라서 라우터의 성능(즉 얼마나 빨리, 그리고 안전하게 가는가)이 결정된다고 봐도 됩니다. 물론 자동차(라우터)가 가지고 있는 기본적인 성능도 중요합니다.

이런 라우팅 프로토콜에는 RIP(Routing Information Protocol), IGRP(Interior Gateway Routing Protocol), OSPF(Open Shortest Path First), EIGRP(Enhanced Interior Gateway Routing Protocol) 등이 있습니다. 물론 이외에도 많지만 우선은 이 정도만 알고 계시면 됩니다.

이런 라우팅 프로토콜을 다른 말로는 '라우팅 알고리즘'이라고도 합니다. 라우팅 알고리즘은 자신의 라우팅 테이블을 가지고 있으면서 자기가 찾아갈 경로를 이곳에 기억해둡니다. 어디가 가장 빠르고 안전한 길인가 하고 말입니다. 즉 라우팅 테이블은 운전기사(라우팅 프로토콜)가 있으면서 어떤 길이 가장 좋은 길인지 메모해 두는 이정표 같은 것이라고 생각하면 됩니다.  
따라서 라우팅 테이블은 일종의 메모리라고 생각하면 되고, 또 어떤 알고리즘을 사용하는가에 따라서 라우팅 테이블의 내용은 달라지게 됩니다. 그렇겠죠? 운전기사별로 메모하는 버릇이 다 다를 테니까 말입니다. 그럼 라우팅 테이블에는 어떤 내용이 들어갈까요?  
주로 목적지, 그리고 그 목적지까지의 거리, 그리고 어떻게 가야 하는가 등의 내용입니다. 또 라우팅 테이블은 시간이 지나면서 계속 업데이트됩니다. 즉 끊임없이 변한다는 말입니다. 새로운 길이 생길 수도 있고 새로운 목적지가 추가될 수도 있기 때문입니다. 끊임없이 변환하는 것이 바로 라우팅 테이블입니다.  
그렇다면 라우팅 알고리즘은 목적지까지의 가장 빠르고 안전한 길을 어떤 조건을 가지고 찾아낼까요? 그것은 사용하는 라우팅 프로토콜(라우팅 알고리즘)에 따라 전부 다릅니다.

다음에는 이런 라우팅 프로토콜에 대해서 하나하나 공부해 보도록 하겠습니다.



> 알고 갑시다!

라우티드는 자동차에 타는 승객이고, 이 자동차를 운전하는 것이 바로 라우팅 프로토콜이다. 그리고 자동차는 라우터이다. 이 자동차의 운전기사는 자기가 가는 목적지에 대한 이정표를 가지고 있는데, 이것을 '라우팅 테이블'이라고 하며 이 라우팅 테이블은 운전자마다 모두 다르다.



## 스태틱(Static) 라우팅 프로토콜과 다이내믹(Dynamic) 라우팅 프로토콜

라우팅 프로토콜을 구분할 때 스태틱과 다이내믹 라우팅 프로토콜로 구분합니다.

스태틱은 우리말로 하면 '정지된' 또는 '정적인'이라는 뜻이니까 말 그대로 한 번 정해놓으면 죽으나 사나 정해진 그대로 수행하는 프로토콜을 말하고, 다이내믹은 '동적인'이란 말 뜻처럼 상황에 따라서 그때그때 변화가 가능한 프로토콜을 말합니다.

좀 더 정확히 살펴보자면 스태틱 라우팅 프로토콜의 경우는 라우터에 사람이 일일이 경로를 입력해주는 것입니다. 가장 빠르고 좋은 길을 사람이 찾아서 말입니다. 그럼 라우터는 사람이 입력해 준대로 데이터를 보내기만 하면 됩니다.

사람이 모든 것을 생각하고 넣어주니까 그보다 더 좋은 길이 없겠죠? (물론 똑똑한 사람이 넣어준 길이라면 말입니다.) 거기다가 라우터는 아무 생각 없이 데이터를 넘기기만 하면 되니까 라우터 입장에서 봤을 때는 생각할 게 별로 없습니다. 시키는 대로 하기 때문에 따로 이정표도 많이 가지고 있을 필요가 없고 말입니다.  
즉 라우터 자체에는 부담이 들지 않아 라우팅하는 속도도 빨라지고 라우터의 성능이 좋아지게 됩니다. 물론 메모리도 적게 듭니다. 그것뿐만이 아닙니다. 스태틱 라우팅의 경우에는 사람이 경로를 알려주는 방식이기 때문에 뒤에 배울 다이내믹 라우팅 방식처럼 라우터들끼리 라우팅 테이블을 교환할 필요가 없습니다.  
따라서 네트워크의 대역폭을 그만큼 절약할 수 있습니다. 게다가 요즘 중요시되고 있는 보안에도 강합니다. 왜냐하면 외부에 자신의 정보를 알리기 않기 때문이죠. 그러고 보면 스태틱 라우팅은 정말 장점이 많습니다.

그러나 단점도 있습니다.

일단 귀찮다는 겁니다. 사람이 라우터에 일일이 목적지별로 경로를 넣어줘야 하니까 말입니다. 또 하나는 입력해준 경로에 문제가 생기면 큰일이 발생한다는 겁니다. 예를 들어 서울에서 부산을 가는 경로를 사람이 생각해서 라우터에 넣어줄 때 비행기가 가장 빠르다고 생각해서 비행기로 간다고 넣어줬다고 가정해 보겠습니다.

그런데 어느 날 날씨가 나빠져서 비행기가 뜨지 않는 사태가 발생했다면 라우터는 어떻게 할까요?

스태틱 라우팅 프로토콜의 경우는 그래도 데이터를 계속 서울 공항으로 보내게 됩니다. 사람이 라우터에 "부산 갈 때는 비행기이다"라고 입력해 놓았기 때문에 아무리 비행기가 뜨지 않아도 모든 데이터를 비행장에 보내게 되고, 결국 부산에는 못 가게 되는 겁니다.  
즉 스태틱 라우팅 프로토콜은 사람이 입력해준 경로에 문제가 발생하면 사람이 다시 그 경로를 고쳐줄 때까지는 계속 문제가 있는 쪽으로 데이터를 보내려고 합니다. 어차피 수동이니까 당연한 결과입니다.

하지만 다이내믹 라우팅 프로토콜은 평소에는 비행기로, 그리고 비행기에 문제가 있으면 기차로, 또 기차에 문제가 있으면 자동차로 이렇게 자동으로 판단하고 그때그때 가장 좋은 길을 찾아내는 방식입니다.

여기까지 보면 다이내믹이 좋아 보이죠?

하지만 다이내믹 프로토콜의 경우는 라우터에 부담을 줍니다. 왜냐하면 라우터가 할 일이 많아지기 때문입니다. 라우팅 프로토콜을 이용해서 어떤 길이 가장 빠른 길인지 계산을 해야 하고, 또 시간이 지날 때마다 바뀐 정보는 없는지 계속 확인해 봐야 하며, 이정표도 계속 업데이트 해야 하고 할 일이 한두 가지가 아닙니다.  
우리가 일반적으로 이야기하는 RIP, IGRP, OSPF, EIGRP 등이 이런 다이내믹 라우팅 프로토콜에 속합니다.

![](./img/1-7/ex4.jpg)

일반적인 라우팅 환경에서는 여러 가지 상황에 자동으로 대응할 수 있는 장점이 있고, 또 자동으로 가장 좋은 길을 찾아가는 다이내믹 라우팅 프로토콜을 주로 사용합니다.  
하지만 어떨 때는 라우팅 성능을 높이기 위해 스태틱을 사용하기도 합니다. 또 라우터가 선택할 수 있는 경로가 오직 하나뿐일 때는 다이내믹 프로토콜을 쓸 필요가 없을 수도 있습니다. 어차피 그 길이 끊어지면 다른 길도 없이 때문에 그때는 스태틱을 쓰는 게 좋습니다.



> 알고 갑시다!

라우팅 프로토콜에는 '스태틱 라우팅 프로토콜'과 '다이내믹 라우팅 프로토콜'이 있다. 스태틱은 라우터가 정해진 길만을 가기 때문에 일이 없는 대신 사람이 일일이 구성을 해줘야 하고, 또 정해진 길에 문제가 생겨도 사람이 그 길을 다시 고쳐줄 때까지는 계속 그 길로 가려고 한다.  
다이내믹은 라우터가 알아서 길을 찾는 장점이 있는 대신 라우터가 할 일이 많아진다.



## 라우팅 테이블에 대한 이야기

라우팅 테이블에 대해 잘 이해가 안 가시는 분들이 있을 것 같아서 그림으로 다시 한번 설명을 드리겠습니다. 아래 그림에서 중앙에 Router의 라우팅 테이블이 있습니다.  
이 Router는 목적지와 목적지를 가려면 어느 인터페이스로 가야 하는지를 자신의 라우팅 테이블에 가지고 있습니다. 여기서 E0는 이더넷 인터페이스 0번을 나타내고, S0는 시리얼 인터페이스 0번을 나타냅니다. 또 T0는 토큰링 인터페이스 0번을 나타냅니다. (인터페이스 번호는 0번부터 시작합니다.)

따라서 라우터가 어떤 목적지를 찾아가려고 하면 먼저 라우팅 테이블을 보게 되는 겁니다.

예를 들어 라우터가 150.2.0.0 네트워크에 있는 어떤 PC를 찾아가는 패킷을 받아들이게 되면 라우터는자신의 라우팅 테이블에 150.2.0.0으로 가는 길이 나와 있는지를 먼저 확인합니다.  
그랬더니 자기 라우팅 테이블에 150.2.0.0 네트워크로 가려면 T0로 가라는 내용이 나와 있으니까 패킷을 토큰링쪽 인터페이스로 넘겨주게 되는 겁니다. 물론 진짜 라우팅 테이블은 이것과는 조금 다릅니다. 또 전에도 말씀드렸듯이 라우팅 테이블은 라우터가 사용하는 라우팅 프로토콜에 따라서도 달라집니다.

제가 여기서 보여드리고자 하는 것은 라우팅 테이블에 관한 개념입니다.

![](./img/1-7/ex5.jpg)

즉 라우팅 테이블이란, 라우터가 어떤 경로를 찾을 때 사용하는 것이고, 이것은 사용하는 라우터의 프로토콜에 따라 달라지며, 또 라우터는 항상 최적의 경로를 찾아 이것을 라우팅 테이블에 유지하고 있다는 겁니다.

자, 그럼 라우팅 테이블이 정말로는 어떻게 생겼는지 한번 알아볼까요?

위 그림에서서처럼 라우터는 자기의 라우팅 테이블에다가 어떤 지도 정보를 가져다 놓습니다. 그건 라우터가 어떤 일을 하는가를 이해한다면 아마 이해가 될 겁니다. 이제 라우터가 어떤 일을 하는지 아시겠죠? 가장 빠르고 안전한 길을 찾아주고, 또 그 길이 끊어지면 다른 길을 찾아주는 역할을 합니다. 그럼 라우터에게 가장 중요한 것은 무엇일까요?

그것은 바로 지도입니다.

그렇다고 우리가 보통 쓰는 그런 지도는 아니고 라우터가 여러 가지 정보를 종합해서 얻어낸 네트워크에 대한 지도입니다. 즉 그림에서 보는 것처럼 어떤 목적지에 가기 위해서는 어떤 경로를 이용해서 가야 된다라고 써놓은 정보입니다.

이것을 우리는 '라우팅 테이블'이라고 합니다.

그러니까 라우터는 전원을 켜는 그 순간부터(물론 라우팅 프로토콜에 대한 세팅은 이미 되어 있다고 가정했을 때입니다.) 라우팅 테이블을 만들기 시작해서 어떤 패킷이 길 안내를 요청하면 라우팅 테이블을 보고 길을 안내합니다.

자, 그렇다면 전원이 꺼지면 어떻게 될까요? 라우터가 이런 라우팅 테이블을 저장할까요? 답은 '아니오'입니다. 꺼지면 모두 지워지게 됩니다.

하지만 걱정할 필요는 없습니다. 전원이 켜지면 다시 만들 수 있으니까요. 얼마만에? 몇 초가 될 수도 있고 또 몇 분이 될 수도 있습니다. 그것은 네트워크의 크기와 사용하는 프로토콜에 따라 많이 달라집니다. 아무튼 라우팅 테이블은 라우터가 가장 중요하게 사용하는 길 안내 정보가 들어있다고 생각하면 됩니다.

시스코 라우터에서 라우팅 테이블을 보기 위해서는 show ip route라는 명령을 사용합니다.

자, 그럼 한번 해볼까요?

![](./img/1-7/ex6.jpg)

![](./img/1-7/ex7.jpg)

![](./img/1-7/ex8.jpg)

이렇게 나오게됩니다.

여기 나오는 라우팅 테이블은 여러분이 시스코 라우터를 계속 만지게 된다면 아주 자주 만나게 되므로 하나하나의 의미를 꼭 아셔야 하는 것들입니다. 하지만 아직은 모르셔도 됩니다. 우선 여기서는 간단하게 구경만 하고 넘어가면 됩니다.

라우팅 테이블에서 각각의 의미는 맨 앞에 있는 영문자가 어떤 프로토콜을 이용해서 이 길을 알아냈는가를 보여줍니다. 즉 I는 IGRP를, R은 RIP를 나타내고, O는 OSPF를 나타냅니다. 또 C는 connected, 즉 직접 접속된 네트워크를 말합니다.

라우터가 그 네트워크에 직접 붙어있다는 뜻입니다. 그다음에 있는 주소는 목적지를 나타냅니다. (정확히 말해서 목적지의 네트워크 주소입니다.) 그리고 그다음에 나오는 것이 바로 어디를 통해서 가야 목적지에 도착할 수 있는가를 알려주는 경로입니다.

여러분이 라우터를 자주 접하게 된다면 꼭 알아야 할 명령입니다. 조금 복잡해도 라우팅 테이블을 자주 접하시는게 좋습니다.



> 알고 갑시다!

라우터는 라우팅 테이블이라는 경로에 대한 지도 정보를 유지하고 있는데, 이건 RAM에 올라가기 때문에 파워가 꺼지면 전부 지워져 버린다. 그리고 다시 파워를 켜면 수초 또는 수분 만에 다시 만들어진다. 이 라우팅 테이블을 시스코 라우터에서 보는 명령은 show ip route이다. (sh ip route는 TCP/IP에서 찾은 경로만 보여준다. 예를 들어 IPX에서의 경로 정보를 보고자 하는 경우에는 sh ipx.route라고 해주면 된다.)



## AS, 그리고 내부용과 외부용 라우팅 프로토콜

여기에서는 먼저 AS(Autonomous System)라는 말에 대해서 알아보도록 하겠습니다. AS란 말은 네트워크를 하는 사람이라면 자주 듣게 되는 말입니다.

AS는 'Autonomous System'의 약자로, 하나의 네트워크 관리자에 의해서 관리되는 라우터들의 집단이라고 생각하면 됩니다. 또 어떤 의미로는 하나의 관리 규정 아래서 운용되는 라우터의 집단 또는 하나의 관리 전략으로 구성된 라우터 집단 등으로, 쉽게 말하면 한 회사나 기업, 또는 단체의 라우터 집단이라고 생각하면 됩니다.

예를 들어 어떤 기업이 네트워크를 구축하게 되면 그 네트워크 안에는 여러 대의 라우터가 올 수 있습니다. 서울에 몇 대, 지방에 몇 대 이렇게 이 기업에 소속된 모든 라우터들은 그 기업의 네트워크 관리자에 의해 관리를 받게 되는데, 이런 그룹이 바로 AS가 됩니다. 또 KT, 데이콤과 같은 ISP 업체들도 자신들이 가진 라우터가 한두 대가 아닐 겁니다. 이렇게 ISP들이 보유하고 있는 라우터 그룹이 하나의 AS가 됩니다.

라우터들을 다시 AS라는 그룹으로 묶어주는 이유는 라우터가 가지는 정보를 효율적으로 관리하고 인터넷 서비스를 좀 더 간편하게 제공하기 위해서입니다. 즉 AS 안에 있는 라우터들은 자신의 AS에 속해 있는 라우터에 대한(물론 자신들 내부의 네트워크 정보겠죠?) 정보만 알고 있으면 됩니다.  
그러다가 외부, 즉 AS 밖으로 나갈 때는 그 AS에 있는 문지기 라우터(ASBR: Autonomous System Boundary Router라고 합니다.)에게 정보를 물어봐서 밖으로(인터넷) 나가는 겁니다.

문지기 라우터는 자신의 AS와 인접해 있는 다른 AS에 대한 정보를 가지고 있으면서 자기 AS에서 밖으로 나가는 라우터나 외부 AS에서 자기 AS쪽으로 들어오는 라우터에게 정보를 제공하는 역할을 합니다.

이런 시스템 때문에 라우터들은 인터넷 접속하더라도 전 세계의 모든 네트워크에 대한 정보를 다 가지고 있을 필요가 없고, 단지 자신이 속한 AS에 대한 정보만 가지면 됩니다.

이때 라우터 AS 내부에서 사용하는 라우팅 프로토콜을 Interior Routing Protocol 또는 Interior Gateway Protocol(IGP)이라고 하고 AS 간에, 즉 AS 외부에서 서로 라우팅 정보를 주고받기 위해 라우터가 사용하는 프로토콜을 Exterior Routing Protocol 또는 Exterior Gateway Protocol(EGP)이라고 합니다.

Interior Routing Protocol의 예로는 우리가 잘 아는 RIP, IGRP, EIGRP, OSPF 등이 있고, Exterior Routing Protocol의 예로는 EGP, BGP 등이 있습니다.

따라서 본사와 지사 간에 라우터를 설치해야 할 경우에는 RIP나 OSPF 등 IGP를 사용하고, 본사의 라우터가 인터넷 서비스 업체와 연결을 해서 인터넷을 사용해야겠다고 생각할 경우에는 BGP와 같은 EGP를 사용합니다. (뒤에 가서 다시 설명드리겠지만 Exterior Gateway Protocol의 경우 요즘은 EGP보다는 거의 BGP를 사용하는 추세입니다. BGP가 여러 가지 장점을 가지고 있기 때문입니다.)

![](./img/1-7/ex9.jpg)

그림에서 구름으로 보이는 것이 하나의 AS입니다. 즉 AS 안에서는 Interior Routing Protocol, 즉 내부용 라우팅 프로토콜인 RIP이나 IGRP 등이 라우터에서 사용되고, AS와 AS간의 통신에서는 라우터에서 BGP 등과 같은 Exterior Routing Protocol, 즉 외부용 라우팅 프로토콜이 사용됩니다.



## 라우터 구성의 시작

자, 이번 시간에는 라우터를 실제 인스톨(설치)할 때는 어떤 방법이 있는지를 알아보도록 하겠습니다.

라우터에 명령어를 입력하는 방법은 몇 가지나 될까요?

CCNA 시험에도 많이 나오는 문제이기 때문에 특히 질문이 많은 부분입니다. 여기에서 완전히 이해를 하고 넘어가면 좋을 것 같습니다. 아래 그림에 있는 것처럼 대략 5가지 정도가 됩니다. 물론 라우터에 따라서 차이는 있겠죠? 여기에서 예를 들어 설명하는 것은 시스코 라우터입니다.

![](./img/1-7/ex10.jpg)

그 첫 번째가 바로 콘솔(console) 케이블이란 것을 이용하는 겁니다. 라우터를 구매하게 되면 대부분은 그 안에 콘솔 케이블이란 것이 같이 들어있는데, 이 케이블을 라우터의 콘솔 포트(라우터의 뒷면에 보면 Console이라고 쓰여있는 포트가 있습니다.)에 연결하고 나머지 한쪽은 컴퓨터의 USB 포트에 연결하게 되면 콘솔 연결이 되는 겁니다.  
가끔 콘솔 케이블 중에는 양쪽 다 UTP 포트 모양으로 되어 있는 케이블도 있는데, 이 경우에는 이 UTP 포트를 다시 USB 포트로 변경하는 컨버터를 따로 준비하셔야 됩니다. UTP 형식이라고 바로 LAN 포트에 연결하면 안 된답니다.

일단 콘솔 케이블 연결이 끝나면 이제 콘솔 프로그램을 다운로드해야 합니다. 윈도우 XP 버전까지만 해도 윈도우에서 기본적으로 하이퍼터미널이라는 콘솔 프로그램을 제공했는데, 지금 사용하는 윈도우 7이나 윈도우 10의 경우는 따로 하이퍼터미널을 제공하지 않기 때문에 인터넷에서 콘솔용 프로그램을 다운로드해야 한답니다.

콘솔용 프로그램 중에서 가장 많이 사용하는 프로그램은 'PuTTY'입니다.

![](./img/1-7/ex11.jpg)

그림에서 보이는 것처럼 이 프로그램은 무료 다운로드가 가능한 프로그램입니다. 설치가 끝나면 바로 PuTTY를 이용해서 콘솔 작업이 가능한데, 그전에 먼저 확인해줄 게 한 가지 있습니다. 앞에서 콘솔 케이블을 여러분의 컴퓨터에 연결한 거 기억나시죠? USB 포트에 연결했잖아요? 이 콘솔 케이블이 제대로 연결되었는지, 그리고 어떤 포트에 연결되었는지를 알아보기 위해 컴퓨터에서 장치 관리자를 열어봐야 합니다.  
장치 관리자는 바탕화면에서 [내 컴퓨터]를 클릭하시고 마우스 오른쪽 버튼을 누르게 되면 [속성]이라는 필드가 보이고, 이걸 선택하면 내 컴퓨터에 대한 여러 가지 정보를 볼 수 있습니다. 이때 맨 왼쪽 위에 [장치 관리자]가 있는데, 이것을 클릭했을 때의 화면이 아래 그림에 보입니다.

![](./img/1-7/ex12.jpg)

[장치 관리자]를 자세히 보시면 아래쪽에 [포트 (COM & LPT)]라는 항목이 보이실 겁니다. 여기에서 [Cisco Serial(COM6)] 이라고 보이실 겁니다. 제 컴퓨터에서는 콘솔 케이블이 COM6에 연결되어 있다는 걸 알 수 있습니다.  
이와 같은 COM 포트 번호는 컴퓨터마다 다르기 때문에 여러분의 컴퓨터에서는 다르게 보일 수 있습니다. 따라서 콘솔 케이블 연결 후에는 꼭 장치 관리자의 열과 포트 번호를 확인하시기 바랍니다.

이제 콘솔 케이블 연결이 완료되었으니 콘솔 작업을 위해 앞에서 다운로드해서 설치했던 PuTTY를 실행해봐야겠죠? 아래 그림은 PuTTY를 실행했을 때의 첫 화면입니다.

![](./img/1-7/ex13.jpg)

좀 복잡하게 영어로 막 써있지만, 별로 중요한 내용은 아니고, 맨 위쪽에 있는 'Serial line'이란 곳에 앞에서 장치 관리자를 열어가며 확인했던 COM 포트 번호를 여기에 써주시면 됩니다.  
저의 경우엔 앞에 그림에서 설명드린 것처럼 포트 번호가 COM6였으니까 여기에 COM6를 입력했습니다. 그리고 옆에 있는 Speed는 시리얼에서의 초당 비트수인데, 원래 잡혀진 디폴트 값인 9,600bps를 그대로 사용하시면 됩니다. 그리고 그 아래쪽 Connection type은 Serial로 선택해 주시면 됩니다.  
앞에서도 잠깐 이야기드렸지만 우리가 COM 포트라고 이야기하는 이 포트가 다른 말로는 Serial 포트이기 때문입니다.

그리고 아래쪽 박스에 Saved Sessions에는 지금 만든 이 콘솔 구성으로 어떤 이름으로 저장할 건지를 정해서 써주면 되는데, 저는 'Hoony Lab'이라는 이름을 만들어줬습니다. 여러분은 아무거나 예쁜 이름으로 만들어주시면 된답니다.  
이렇게 한번 Session 이름을 만들어 놓게 되면 다음부터는 PuTTY를 쓸 때마다 구성을 넣어줄 필요 없이 그냥 저장된 세션 이름만 선택하면 되겠죠?

자, 그럼 지금까지의 콘솔 연결을 정리해볼까요?

![](./img/1-7/ex14.jpg)

이렇게 모든 구성을 마쳤으면 아래 보이는 [Open] 버튼을 눌러 라우터에 들어갈 수 있습니다.

이게 바로 콘솔을 이용한 연결입니다. 콘솔 연결을 통한 라우터 구성은 가장 일반적인 구성입니다. 여러분도 나중에 라우터를 구성하게 될 기회가 있을 텐데 그때 바로 콘솔에 연결하는 방식을 사용할 것입니다.

콘솔을 이용한 방식은 설명드린 것처럼 라우터를 맨 처음 구성할 때는 가장 일반적이고 편리한 방법이자만, 라우터에 직접 PC를 들고가서 콘솔 케이블을 연결해주어야 하는 불편함이 있습니다.  
또한 콘솔 케이블도 필요하기 때문에 맨 처음 구성하는 경우나 고장이 났을 때만 사용하고, 일단 한 번 라우터가 구성된 이후에는 잘 사용하지 않는 방법입니다.

즉 일단 라우터의 모든 세팅이 끝난 후 나중에 라우터의 구성 일부를 변경하는 경우에는 콘솔보다는 텔넷을 이용해서 구성을 변경하기 때문입니다.

콘소 ㄹ방법의 장점은 가장 강력한 세팅 방법이라는 겁니다. 예를 들어 나중에 나오는 텔넷 방식은 라우터와 통신이 끊어지게 되면 텔넷도 같이 끊어지기 때문에 네트워크 고장 발생시 텔넷으로 라우터에 접근이 불가능한데, 이때도 콘솔은 라우터에 접근이 가능합니다.

또 AUX(Auxiliary) 포트라는 것이 있는데, 이 포트에는 모뎀을 연결할 수 있게 되어 있습니다.

여기에 모뎀을 연결해 놓으면 원격지에서도 모뎀을 통해 라우터에 명령어를 입력할 수 있습니다. 이렇게 모뎀을 이용한 라우터 구성은 기존의 네트워크에 문제가 발생해서 텔넷으로는 라우터에 접근이 불가능합니다. 또한 콘솔을 연결해서 구성을 하자니 너무 먼 곳, 즉 라우터가 지방 같은 곳에 있어 불가능한 경우에 사용하는 방법입니다.

물론 라우터에는 모뎀에 대한 세팅이 모두 되어 있어야 합니다. 이런 AUX 포트의 사용은 순전히 문제가 발생했을 때를 대비한 것이기 때문에 일반적이지는 않습니다.

그다음은 텔넷(Telnet)을 이용한 라우터 구성입니다. 텔넷 역시 PuTTY를 이용해서 사용이 가능합니다.

아래 그림을 보면 콘솔을 만들 때와 같은 화면이라는 것을 아실 겁니다. 다만 하나 다른 것은 접속 방법(Connection Type)이 Telnet이라는 것입니다.

![](./img/1-7/ex15.jpg)

대부분 라우터를 관리할 때 가장 많이 사용하는 방법이 바로 이 텔넷을 이용한 방법입니다. 이 방법은 라우터의 IP 주소만 알고 있고 네트워크에 접속만 되어 있다면 어디에서도 구성이 가능하다는 장점이 있습니다. 반면 라우터의 맨 처음 구성 시에는 어차피 IP 주소조차 없기 때문에 텔넷 사용이 불가능하다는 단점과 네트워크 연결이 끊어질 경우 텔넷 접속이 불가능하다는 단점을 가지고 있습니다.

텔넷을 사용하는 한 가지 예를 들어보겠습니다.

만약 제가 지방의 어떤 라우터를 설치했다고 가정해 보겠습니다. 물론 맨 처음 지방에 그 라우터를 설치하기 위해 출장을 갔을 겁니다. 라우터를 전산실에 설치하고 콘솔을 이용해서 라우터의 IP 주소를 세팅했거나 기타 라우터의 구성을 세팅했을 겁니다.  
모든 것이 이상이 없다는 것을 확인하고 저는 다시 서울로 올라왔습니다. 그런데 그 라우터의 구성을 변경할 일이 생겼다고 가정해보겠습니다. 뭐 프로토콜이나 서브넷 등 말입니다. 그렇다면 또다시 콘솔 케이블을 가지고 직접 지방으로 가야 할까요?

바로 이럴 때 사용하는 것이 텔넷입니다. 물론 네트워크로 연결되어 있다는 가정이 있어야겠죠? 그런 텔넷을 바로 'Virtual Terminal(가상 터미널)'이라고 합니다.  
그럼 이제는 아시겠죠? 만약 지금 설명한 상황과 똑같은 상황에서 네트워크에 문제가 생겨 텔넷조차도 불가능한 경우에는 무엇을 사용할까요? 그게 바로 AUX 포트를 통한 접속입니다. 앞에서 배워서 아마 알고 계실 겁니다.

네트워크 관리 시스템(NMS)에 의한 라우터의 구성 방법은 라우터 구성 방법 중에서는 가장 쉬운 방법일 겁니다. 물론 NMS 구성은 좀 어렵지만 일단 구성된 NMS에서 라우터를 세팅한다고 가정한다면, 지금까지 방법과는 달리 그래픽 방식이기 때문에 훨씬 쉽고 또 여러 가지 다른 정보도 많이 알 수 있게 됩니다.

마지막으로 TFTP 서버로 라우터를 구성하는 방법입니다. 이 방법은 앞에서 설명드린 4가지 방법과는 약간의 차이가 있습니다. 즉 앞의 4가지 방법은 직접 명령을 라우터에 세팅할 수 있는데, TFTP 서버에 의한 방식은 서버에서 직접 라우터로 세팅을 해주는 방식은 아닙니다.

TFTP 서버에 의한 라우터 구성은 이미 다른 곳에서 만들어 놓은 라우터의 구성 파일을 TFTP 서버에 저장해 두었다가 라우터로 다운로드해 주는 방식을 말합니다.  
이때 다운로드에 사용되는 프로토콜이 바로 TFTP(Trivial File Transfer Protocol)인데, 우리말로 하면 '단순형 파일 전송 프로토콜' 정도 됩니다.

만약 여러분이 라우터 IP 주소를 아신다면 윈도우의 MS-DOS 모드로 이동해 telnet x.x.x.x(라우터의 IP 주소)를 입력해 보세요.

그럼 라우터로 텔넷을 하게 됩니다. 물론 아까 배운 대로 하이퍼터미널로도 텔넷 구성은 가능하지만 간단하게 해보려면 MS-DOS 모드에서도 가능합니다. 라우터의 IP 주소를 모른다구요? 그것은 도스 모드에서 ipconfig(windows xp)을 했을 때 게이트웨이 번호로 나타나는 주소가 여러분의 네트워크에 붙어있는 라우터의 IP 주소입니다.

![](./img/1-7/ex16.jpg)

가장 많이 쓰이는 방법이니 한 번씩 연습해 보는 게 좋겠죠? 물론 지금은 그냥 연습만 해보기 바랍니다. 또 직접 라우터에 가서 콘솔을 연결할 수 있는 분은 콘솔 케이블과 노트북을 들고 라우터로 가서 라우터의 콘솔 포트와 노트북의 시리얼 포트에 콘솔 케이블을 연결하고 한 번 라우터에 접속해 보세요. 아마 라우터와 친해지게 될 겁니다.

위 그림은 콘솔을 통한 라우터에 접속한 것을 보여줍니다. 라우터에 뭐라고 글씨가 많이 나와있는데 지금은 신경쓰지 않으셔도 됩니다. 어차피 나중에 이 뜻을 다 알게 될 거니까요.

아무튼 지금은 라우터에 콘솔을 연결하면 이렇게 보인다는 것만 알면 됩니다. 물론 콘솔을 통해서 접속했는데 아무것도 안 보이거나 이상한 글자가 깨져서 나오는 경우에는 콘솔의 구성에 이상이 있거나 케이블에 이상이 있다고 생각하면 맞을 겁니다.  
따라서 위에서 설명드린 구성을 다시 한 번 확인해보고 꼭 라우터 구입 시에 같이 딸려오는 콘솔 케이블을 사용하시기 바랍니다.  
참고로 이 라우터는 아무것도 세팅되어 있지 않은 새 라우터이고 기종은 시스코 2509입니다.



> 알고 갑시다!

라우터를 구성하는 방법은 5가지가 있다. 첫 번째로 맨 처음 라우터를 구성할 때 쓰는 콘솔 케이블을 통한 구성, 두 번째는 원격지에서 모뎀을 이용한 구성, 세 번째는 일단 IP 주소가 세팅된 다음에 네트워크를 통해서 접속하는 텔넷을 이용한 구성, 네 번째는 네트워크 관리 시스템이 있는 곳에서 사용하는 NMS를 이용한 구성, 그리고 맨 마지막에는 미리 구성된 파일을 저장했다가 나중에 라우터로 다운로드하는 TFTP 서버를 이용한 구성이 있다.



## 라우터의 중요한 몇 가지 모드

여기에서는 라우터의 몇 가지 중요한 모드에 대해서 한번 알아보겠습니다. 아마 다 알고 계실거라고 믿지만, 그래도 기본을 짚고 넘어가는 것도 중요하니까 아는 분은 복습한다는 생각으로 읽어보세요.
또 시스코 라우터를 처음 접하시는 분은 이게 도대체 무슨 소리냐고 하겠지만 라우터에 대한 설명에서, 또 라우터를 만지는 사람들의 이야기에서 자주 나오는 중요한 개념이니까 꼭 이해해 두기 바랍니다.

시스코 라우터의 경우 콘솔을 이용해서 라우터에 들어가든, 아님 텔넷을 통해 라우터에 들어가든 라우터의 몇 가지 모드 화면으로 들어가게 되는데, 그 모드는 대략 유지 모드, 프리빌리지드(Privileged) 모드, 구성(Configuration) 모드, 셋업(Setup) 모드, RXBOOT 모드 등이 있습니다.

RXBOOT 모드는 평소에는 사용할 일이 없는 모드입니다. 그럼 이 모드는 언제 사용할까요? 이 모드는 라우터의 패스워드를 모르는 경우나 라우터의 이미지 파일(IOS)에 문제가 생긴 경우 복구를 위해 사용합니다. 즉 이 모드는 문제 발생시 복구용으로 만들어 놓은 모드라고 생각하면 됩니다.  
이 모드는 'RXBOOT 모드' 또는 'ROMMON 모드'라고도 합니다. ROM Monitor 모드를 줄여서 부르는 말입니다. 이 모드의 사용법은 나중에 패스워드 복구를 배울 때 설명할 예정이므로 일단은 롬몬, 또는 RXBoot 모드라는 것이 있다라는 것까지만 알아두고 넘어가도록 하겠습니다.

그다음 셋업 모드입니다. 셋업 모드는 라우터를 처음 구매해서 파워를 켰거나 라우터에 구성 파일이 없는 경우 라우터가 부팅하면서 자동으로 들어가는 모드입니다. 이 모드에 들어가서 라우터는 구성에 관계된 질문을 하나하나 던지게 되고, 사용자는 이 질문에 대답하면서 구성 파일을 만들 수 있도록 되어 있는데, 이 모드 역시 뒤에 라우터의 구성에서 자세히 다룰 예정이므로 셋업 모드란 것이 있구나까지만 알고 넘어갑니다.

그럼 이제 나머지 유저 모드, 프리빌리지드 모드(Privileged Mode), 그리고 구성 모드를 하나씩 알아보도록 하겠습니다.

라우터에 콘솔로 접속하게 되면 다음과 같이 보이게 됩니다. (여기에서는 기본적인 세팅이 되어 있는 라우터라고 가정하겠습니다. 처음 상태는 아니란 말입니다.)

![](./img/1-7/ex17.jpg)

이때 '>' 가 있는 이 모드를 '유저 모드'라고 합니다.

![](./img/1-7/ex18.jpg)

이 유저 모드에서는 주로 테스트, 즉 현재 상태를 볼 수 있습니다. 핑(Ping)을 해본다든지, 아니면 트레이스 등을 해볼 수 있습니다. 하지만 라우터의 구성 파일을 본다거나 구성 자체를 변경할 수 없습니다.

즉 일반 유저가 라우터의 구성을 변경시키면 문제가 되겠죠?

따라서 라우터의 운영자 모드는 따로 있는데, 이것이 바로 프리빌리지드(Privileged) 모드입니다. 프리빌리지드 모드에 들어가는 방법은 유저 모드에서 enable라는 명령을 사용하는 것입니다.  
즉

![](./img/1-7/ex19.jpg)

이렇게 enable과 해당 패스워드를 입력하면 프리빌리지드 모드에 들어가게 됩니다. 원래 패스워드는 안 보이는 건 다 아시죠?

![](./img/1-7/ex20.jpg)

프리빌지드 모드에 들어오면 프롬프트가 꺾쇠(>)에서 샵(#)으로 바뀐 것을 알 수 있습니다.

이 모드에서는 모든 라우터의 명령이 가능합니다. 구성을 볼 수도 있고 변경할 수도 있습니다.  
유저 모드는 사용할 수 있는 명령이 제한적인데 비해서 프리빌리지드 모드는 사용할 수 있는 명령의 제약이 없는 모드입니다. 즉 운영자가 뭐든지 해도 괜찮습니다.

프리빌리지드 모드에서 다시 유저 모드로 빠져나갈 경우에는 다음과 같이 입력하면 됩니다.

![](./img/1-7/ex21.jpg)

유저 모드에서도 바져나가고 싶으면 이렇게 입력하면 됩니다.

![](./img/1-7/ex22.jpg)

일단 우리가 라우터를 세팅하는 경우에 가장 많이 만나는 모드가 바로 지금 설명드린 2가지 모드입니다. 잘 기억해 두기 바랍니다.

자, 다음은 구성 모드입니다. 라우터의 구성 파일을 변경하는 경우에 사용하는 모드입니다. 보통 Config 모드라고도 하는 이 모드는 라우터를 만지는 엔지니어들은 꼭 알아두어야 할 모드입니다. 앞에서 말씀드린 대로 우리가 만들어야 할 모든 구성 파일을 바로 이곳에서 만들기 때문이죠.

아무튼 이 모드에 들어가기 위해선 반드시 우리가 프리빌리지드 모드에 있어야 합니다. 즉 유저 모드에서는 결코 들어갈 수가 없는 모드라는 겁니다. 그럼 구성 모드에 한번 들어가 볼까요?

우선 프리빌리지드 모드에서 들어갈 수 있다고 했으니까.

![](./img/1-7/ex23.jpg)

이제부터는 라우터의 모든 구성 파일을 이곳에서 만들 수 있습니다. 구성을 다 마치고 구성 모드에서 프리빌리지드 모드로 빠져나갈 때는 `Ctrl`+ `Z`를 이용합니다. 키보드의 왼쪽 아래에 있는 `Ctrl` 과 `Z`를 동시에 누르는 겁니다.

빠져나오는 방법은 이 외에도 exit를 이용하는 방법이 있습니다. Exit와 `Ctrl`+ `Z`의 차이는 `Ctrl`+ `Z`는 한 번에 프리빌리지드 모드로 빠져나올 수 있는 반면에 Exit는 단계별로 빠져나온다는 겁니다.

이 말이 이해가 안 가겠지만 우선은 그렇게만 이해하고 여기서는 2가지 방법으로 빠져나올수 있다는 것까지만 이해하면 됩니다. 자, 그럼 한번 빠져나와 볼까요?

![](./img/1-7/ex24.jpg)

이렇게 빠져나왔습니다. 쉽죠?

> 알고 갑시다!

라우터에는 몇 가지 모드가 있다. 여기서 우리가 자주 사용하는 모드는 프리빌리지드 모드, 즉 운영자 모드와 구성 모드, 즉 Config 모드이다. 구성모드로의 변경은 오직 프리빌리지드 모드에서만 가능하다.  
그리고 유저 모드에서 프리빌리지드 모드로 들어가는 명령은 enalbe이고, 다시 유저 모드로 나오는 명령은 disable이다.

## 라우터 안에는 어떤 것들이 살까요?

여기에서는 라우터의 내부를 한번 들여다볼까요? 물론 라우터의 내부를 아는 것이 라우터를 설치하고 구성을 하는 데 무슨 관련이 있느냐고 생각하는 분들도 있겠지만, 뭐든지 기본이 중요한 것 아니겠습니까?  
기본을 충실히 하면 이해가 쉽습니다. 역시 요즘은 암기보다는 이해가 중요시되는 세상이니 저도 여러분의 이해를 위해 잠깐 라우터의 내부에는 무엇들이 사는지를 설명해 드릴까 합니다.

아래 그림을 보면 라우터가 그렇게 복잡한 것이 아니라는 것을 알게 될 겁니다. (여기서 사용한 라우터는 시스코 2500 시리즈이지만 다른 라우터들도 똑같은 구조라고 생각해도 됩니다.)

그림에서 위쪽에 라우터를 움직이는 프로글매이 사는 공간이 있고, 아래쪽에는 콘솔 포트와 AUX 포트, 인터페이스가 있습니다.

인터페이스는 바로 네트워크와 라우터에서 직접 연결되는 부분입니다. 즉 허브나 스위치와 연결하는 이더넷 인터페이스 또는 DSU나 CSU와 연결하는 Serial 인터페이스가 바로 그것입니다.

![](./img/1-7/ex25.jpg)

자, 그럼 맨 위부터 볼까요?

가장 먼저 램(RAM)이 있습니다. 램(RAM)에는 라우터를 운용하는 운용 시스템이 올라가게 되는데, 아시는 대로 램은 파워가 꺼지면 모두 지워지는 곳이기 때문에 이 운용체제도 파워가 켜진 다음에 램(RAM) 위로 올라오게 됩니다.

모든 라우터들은 그들 고유의 운영체제를 가지고 있는데,  시스코 라우터의 경우 이 운영체제로 IOS(Internetwork Operating System)를 사용합니다.

시스코의 경우는 모든 시스코 제품에 동일하게 이 운영체제를 사용하기 때문에 한 제품에 대한 경험만 있으면 다른 제품을 쉽게 만질 수 있는 장점도 있습니다.

램(RAM)에는 일단 운영체제가 올라가고 그다음은 라우팅 테이블이 들어갑니다. 라우팅 테이블이란, 전에 배운 대로 라우터가 목적지에 대한 정보를 저장해 놓은 테이블이라고 보면 되는데, 쉽게 말씀드려서 목적지까지의 약도라고 생각하면 됩니다.

목적지가 많으면 약도도 많아질 거고, 가는 곳이 한두 군데밖에 안된다면 약도도 적어지게 될겁니다. 따라서 라우터를 어떤 용도로 사용하는가에 따라, 그리고 어떤 라우팅 프로토콜을 사용하는가에 따라 라우팅 테이블의 ㅡㅋ기는 큰 차이가 납니다.

물론 라우팅 테이블이 크면 클수록 램을 많이 차지하겠죠?

운영체제도 마찬가지입니다. 즉 어떤 용도로 라우터를 쓰는가에 따라 여러 가지 운영체제 중 하나를 골라서 사용하게 되는데, 이 운영체제 역시 우리가 돈을 주고 구입하는 것이다 보니 무조건 모든 기능이 많다고 좋은 것은 아닙니다.  
기능이 많으면 많을수록 가격은 비싸지고 또 램을 많이 차지하게 됩니다. 따라서 자신이 하고자 하는 일이 가장 적당한 운영체제를 골라야 한다는 것을 잊지 말기 바랍니다.

램에 올라가는 것들 중에서 운영체제와 라우팅 테이블 이외에 또 중요한 것 한 가지는 바로 구성 파일입니다. 즉 라우터의 주소는 어떻게 되고, 라우팅 프로토콜은 무엇을 사용하며, 보안은 어떻게 하고 등등이 우리가 구성 모드에서 만들어 줬던 라우터의 구성 파일이 램에 올라가서 실제 라우터를 움직이는 겁니다. 정말 중요하겠죠?

램에는 이외에도 ARP 캐시니, 패스트 스위칭에 대한 캐시 등을 가지고 있습니다.

자, 그렇다면 이제 램이 무엇을 저장하고 있는지는 대충 이해가 가실 겁니다. 그런데 램의 특성, 즉 라우터의 전원이 꺼지면 램에 있는 모든 정보가 지워진다는 것에 대해서 걱정하는 분들이 많으실 겁니다. 라우터의 운영체제도 지워지고, 그동안 알아두었던 지도 정보, 즉 라우팅 테이블도 날아가 버릴 거고, 게다가 가장 중요하다는 라우터의 구성 파일도 지워진다면 정말 큰일이 아닐 수 없습니다. 즉 백업을 위한 무언가가 필요하다는 이야기가 됩니다.

그래서 바로 다른 메모리가 필요한 겁니다.

그 중의 하나가 바로 NVRAM(Non Volatile RAM)입니다. 말 그대로 비휘발성, 즉 전원을 끈 상태에서도 정보가 날아가지 않는 램을 뜻합니다.

자, 이 이야기를 드리기 전에 먼저 램에 저장된 것 중에서 백업을 해야 하는 것이 뭐가 있는지부터 알아볼까요?

일단 라우팅 테이블은 백업할 필요가 없습니다.

물론 목적지까지의 모든 정보를 가진 라우팅 테이블이 없다면 패킷이 목적지에 도달하는 것은 불가능할 겁니다. 하지만 라우팅 테이블은 그때그때 변하는 다이내믹한 정보이고, 게다가 라우팅 테이블을 다 지운 상태에서도 라우터가 이 테이블을 다시 만드는 데는 몇 초 정도밖에 걸리지 않기 때문에(물론 경우에 따라서는 몇 분까지도 걸리는 게 있지만 대부분은 짧은 시간입니다.) 라우팅 테이블을 어디에 저장한다는 의미가 없습니다.

하지만 라우터의 구성 파일, 즉 어떤 인터페이스에 IP Address는 얼마이고, 또 어떤 라우팅 프로토콜을 쓰며, 어떤 식으로 라우팅 테이블을 관리할 것인지에 대한 Configuration 파일은 만약 지워지게 되면 문제가 심각해질 것입니다.

모든 구성을 전부 새로 해야 하니까 말입니다.

그래서 이 구성 파일을 저장하는 곳이 있어야 하는데, 이것이 바로 NVRAM입니다. 이곳에 저장된 구성 파일은 라우터가 켜지면 램으로 올라와서 라우터를 구성 파일대로 움직이게 하고, 파워가 꺼질 때는 NVRAM에 저장됩니다.  
물론 우리가 저장 명령을 이용해서 저장해주어야 하겠지만 말입니다. 이해가시죠?

시스코 라우터의 경우는 NVRAM에 저장된 구성 파일을 보는 명령이 'show startup-config' 또는 'show config'입니다. 그럼 램에 저장된 구성 파일을 보는 명령은 무엇일까요? 그건 'show running-config' 또는 'write terminal'입니다.

혹시 시스코 라우터를 가지고 계시는 분은 한번 해보시기 바랍니다.

자, 그럼 이제 Flash 메모리에 대해서 한번 알아보겠습니다. 전에 말씀드린 것처럼 라우터를 움직이는 운영체제인 IOS(Internetwork Operating System)는 플래시 메모리란 곳에 저장됩니다.  
플래시 메모리는 전원이 꺼져도 데이터가 지워지지 않는 곳입니다. 또 라우터에 따라서는 플래시 메모리를 교체하거나 확장할 수도 있습니다. 전에 설명드렸던 NVRAM과 다른 점은 NVRAM에 비해서 플래시 메모리는 용량이 크다는 것입니다.  
NVRAM은 오직 구성 파일 저장용으로 사용되는 반면, 플래시 메모리는 주로 IOS 이미지 파일 저장용으로 사용된다는 겁니다.  
플래시 메모리에 저장되어 있던 IOS는 전원이 켜지면서 라우터의 무대격인 램으로 뛰어올라오게 되는 겁니다. 그리고 전원이 꺼지면 무대인 램에서 내려와 플래시 메모리에 머무르는 겁니다.

만약 우리가 쓰는 라우터는 계속해서 새로운 기능이 추가되는데 그렇다면 라우터를 계속 새것으로 바꿔야 할까요?

아닙니다. 라우터의 운영체제인 IOS만 업그레이드하면 됩니다. IOS의 업그레이드를 위해서는 플래시에 새로운 IOS를 다운로드하는 방법이 있습니다. 이렇게 IOS를 업그레이드할 때 사용되는 프로토콜이 우리가 전에 배웠던 TFTP라는 겁니다.  
이 부분은 나중에 다시 한 번 알아보도록 하겠습니다.

아무튼 라우터의 운영체제는 어디에 저장될까요?

그건 플래시 메모리란 곳입니다.

그리고 롬(ROM)이란 곳에는 라우터의 가장 기본적인 내용, 이를테면 파워가 켜지면 어떤 순서로 라우터 스스로의 상태를 점검하고 또 어디서 운영체제(IOS)를 가져다가 메모리에 올릴 것인지 등을 적어 놓습니다.  
우리들의 PC에서 보면 CMOS 아시죠? 즉 PC를 처음 켜면 메모리가 얼마니, 하드가 몇 메가니 보여주고 그다음에 좀 있다가 윈도우 화면이 뜨고 하는 그런 것과도 비슷하다고 볼 수 있습니다. 라우터도 마찬가지입니다.

라우터가 켜지면 처음에는 자기 스스로를 점검한 후(이 과정을 POST, 즉 Power On Self Test라고 합니다.) 저장되어 있던 IOS를 가져오고, 구성 파일을 가져오게 되는 겁니다.  
또 롬에는 기본적인 IOS가 들어 있습니다. 이것이 들어 있는 이유는 라우터에 문제가 생길 경우 기본적인 IOS를 롬에서 가져오기 위해서입니다. 이전에 배운 대로 ROM Monitor 모드에서 롬부팅을 하는 경우는 바로 롬에 있는 IOS를 가지고 부팅하는 것입니다.

암튼 이렇게 라우터 안에는 메인 메모리(RAM)와 NVRAM(비휘발성 메모리), 그리고 플래시 메모리, 롬이 있습니다. 물론 이것은 시스코 라우터의 경우인데, 다른 라우터도 이와 비슷하다고 보면 됩니다.

이제 여러분은 라우터의 내부 탐험을 마쳤습니다.

어때요? 내부에도 별건 없죠? 라우터 역시 한 대의 컴퓨터라고 생각하면 편하실 겁니다. 즉 내부에는 PC와 같은 램도 있고 하드디스크 같은 플래시 메모리도 있습니다. 물론 롬도 있죠? 다만 NVRAM은 PC에 없는 기능이네요.

![](./img/1-7/ex26.jpg)

위 그림은 시스코 2501 라우터의 내부입니다. 우리가 생각했던 것보다는 간단하죠? 그림 왼쪽에 팔랑개비같이 생긴 게 팬(Fan)입니다. 장비가 열이 나는 것을 방지하기 위한 선풍기라고 생각하면 되겠네요. 그리고 그 옆에 램이 보입니다. 2501의 경우는 램을 설치하는 뱅크가 하나입니다. 이것도 알아두셔야겠죠?  
그리고 오른쪽에 두 개의 메모리가 꽂혀있는데(자세히 보이지는 않습니다.) 이것이 바로 플래시 메모리입니다. 2501의 경우 플래시를 꽂는 뱅크는 2개가 있습니다. 여기 꽂힌 플래시는 8메가짜리 두 개니까 16메가 플래시가 되겠네요.  
가운데 보이는 것이 바로 CPU입니다. 시스코 2501 라우터의 CPU는 매킨토시 컴퓨터에서 사용하는 모토롤라칩을 사용하는데, 여기는 MC68030 칩이 사용되었습니다. 대충 아시겠죠?

라우터에는 그림에서 보는 여러 가지 메모리와 인터페이스, 그리고 콘솔 포트, AUX 포트가 있는데, 하나하나는 모두 쓸모가 있다. 라우터에서 모든 일이 벌어지기 위해서는 일단 프로그램이 무대로 올라와야 하는데 이 무대가 바로 램이고, 롬에는 라우터의 기본 정보가, NVRAM에는 구성 파일이, 그리고 플래시 메모리에는 IOS 이미지가 저장된다.

참고로 시스코 라우터 중에서 시스코 3620이라는 라우터의 내부를 보면서 지금까지 설명드린 메모리들을 한번 알아보겠습니다.

우리가 알아야 할 메모리는 주로 램과 플래시 메모리인데, 그 이유는 이 2가지 메모리는 업그레이드, 즉 확장이 필요할 수 있기 때문입니다. 이제 확장을 해야 하는 이유는 아실 겁니다. 그래도 한번 생각해 볼까요? 램의 확장은 왜 필요할까요? 그건 네트워크가 큰 곳에 위치하고 있어서 라우팅 테이블이 커지거나 라우팅 프로토콜이 OSPF처럼 메모리를 많이 필요로 하는 경우, 또 IOS 버전이 높고 지원 기능이 많은 경우입니다.  
또 플래시 메모리를 확장하는 경우 IOS 버전을 올리거나 지원 기능이 많은 버전을 사용하는 경우입니다. 시스코 라우터의 IOS는 버전과 기능에 따라서 권고하는 라우터의 램 용량과 플래시 메모리 크기가 있습니다. 이 정보는 시스코 홈페이지를 참고하기 바랍니다.

![](./img/1-7/ex27.jpg)

그림에서 보이는 대로 3600 시리즈 라우터에도 우리가 배운 메모리들이 들어 있습니다. 말씀드린 것처럼 메모리를 얼마나 사용하는가는 사용 환경에 따라 차이가 있기 때문에 램과 플래시의 경우 항상 적정한 메모리르 유지하는 것이 중요합니다.  또 경우에 따라서는 확장 역시 필요합니다.  
맨 왼쪽에 보이는 롬은 특별한 일이 아니면 교체하는 일이 없습니다. 그러나 램은 많으면 많을수록 유리합니다. 그림에서는 4개의 램이 꽂혀 있는데, 이렇게 램이나 플래시를 꽂을 수 있도록 되어 있는 공간을 '뱅크'라고 합니다. 뱅크가 몇 개인지가 램이나 플래시를 얼마까지 확장할 수 있느냐의 기준이 됩니다.

램이나 플래시에 꽂히게 되는 메모리는 아래 그림에 보이는 것과 비슷합니다. 플래시는 고가형 장비일 경우 주로 PCMCIA 방식을 지원해서 앞에서 카드 형식으로 꽂고 뺄 수 있게 되어있습니다. 3600 시리즈에서는 플래시 메모리를 PCMCIA 방식과 기존 메모리 방식으로 둘 다 지원합니다.

![](./img/1-7/ex28.jpg)

그림에서 위에 보이는 메모리는 대부분 라우터의 내부에 설치되는 방식입니다. 그리고 위 그림의 플래시 메모리는 라우터의 PCMCIA 슬롯에 설치되는 방식입니다. 앞으로 이런 메모리들을 만나게 되면 꼭 한번 자세히 봐두시기 바랍니다.

최신형 라우터도 뜯어볼까요?

자, 이 책이 나오던 시절에만 해도 잘 나가던 Cisco 2501 라우터나 3600 라우터는 이제는 한물간 라우터가 되었답니다.

아래 그림의 라우터가 바로 가장 최근에 발표된 최신형 라우터 'ISR 4400'입니다. ISR 라우터는 Integrated Service Router의 약자로, 말 그대로 '여러 가지 서비스'가 포함되어 있는 라우터라는 뜻입니다.

여러 가지 서비스란?

요즘 네트워크에 꼭 필요한 기능, 예를 들어 보안, 무선, VoIP 등의 기능이 라우터 안에 포함되어 있다는 의미랍니다. 지금 우리가 배우는 이 책에서 라우터의 역할은 말 그대로 네트워크와 네트워크를 연결해주고, 가장 빨리 목적지 네트워크까지 데려다주는 단 하나의 기능만 이야기하고 있지만, 요즘 라우터는 라우터의 기본적인 기능 이외에도 말씀드린 것처럼 여러 가지 첨단(?) 기능을 포함하고 있답니다.

책에서 Cisco 2501 라우터만 보다가 막상 실전에 나가서 최신형 라우터를 보고 당황하실까봐 잠깐 설명드리겠습니다.

그림 보시죠.

![](./img/1-7/ex29.jpg)

전혀 새로운 라우터죠? 색깔도 그동안 보아왔던 녀석들보다 멋지고, 기품이 있어 보입니다. 지금 보시는 이 라우터는 ISR 4400 라우터로, 보통 'ISR 4K'라고 불리는 라우터입니다.  
앞에서 사진으로도 설명드렸지만 ISR 4K 라우터는 지방 사무소에 특화된 라우터로, 이 녀석 한대만 있으면, 라우터 기능뿐만 아니라 스위치, 방화벽, 서버까지의 모든 기능을 다 제공해줄 수 있는 만능 라우터랍니다. 그중에서도 사진에 보이는 라우터는 Cisco 4451이라는 가장 최상급 라우터입니다.

조금 후에 뒷모습을 보여 드리겠지만 사진에서 보이는 것처럼 앞모습은 상당히 깔끔합니다. 파워 서플라이와 팬만 있죠? 팬은 말 그대로 선풍기 같은 건데, 라우터 안에서 발생하는 열을 배출해주기 위해 있습니다.  
얼핏 봐서는 안 보이는데, 가운데 부분에 구멍이 송송 뚫린 부분을 자세히 보면 그 안에 팬이 들어있답니다. 최근 라우터들은 대부분 장착 시에 앞면과 뒷면이 거꾸로 장착되기 때문에 사실 여기 보이는 부분이 앞이긴 하지만 뒤쪽으로 장착되곤 한답니다. 따라서 이쪽에 전원을 연결하는 파워 서플라이가 있죠.  
자세히 보면 라우터의 오른쪽에 손잡이가 하나 보이는데, 여기에 추가 파워 서플라이를 더 넣을 수 있게 되어 있답니다. 따라서 전원을 이중으로 공급해줌으로써 전원 하나가 고장나더라도 나머지 백업 전원을 사용할 수 있도록 해줬답니다.

자, 이제 뒷면을 볼까요?

![](./img/1-7/ex30.jpg)

ISR 4K(또는 ISR 4000이라고도 부르고, 가끔은 Cisco 4000이라고도 부른답니다.)의 뒷면은 앞 모습보다 조금 더 복잡하답니다.

왼쪽에 콘솔 포트가 보입니다. 콘솔 포트는 RJ45 방식(UTP 포트)과 Mini USB(USB Type B) 방식으로, 둘 중 하나를 사용해서 연결해줄 수 있습니다. 요즘은 워낙 USB가 대세다 보니 USB 방식으로 콘솔을 연결하는 경우가 많답니다.

Auxiliary 포트라고 보이는 포트는 흔히 'AUX 포트'라고 부릅니다. 앞에서도 알아봤지만 AUX 포트는 주로 모뎀을 연결해서 백업 라인을 구축하는 용도로 만들어졌는데, 제 경험으로는 AUX 포트는 거의 사용하는 경우가 없어 그냥 이런 포트가 있다라고만 알아두시면 될 것 같습니다.



CIsco 4451 라우터는 기본적으로 4개의 기가비트 포트를 제공해줍니다. 그림을 보면 우리가 가장 많이 사용하는 RJ45(UTP) 방식과 SFP 방식으로, 둘 중에 하나를 선택해서 사용하도록 되어 있습니다. SFP는 Small Form-Factor Pluggable의 약자로, 기존 광케이블 포트보다 훨씬 작게 만들어져서 공간을 절약할 수 있도록 디자인된 광 케이블 포트라고 쉽게 생각하시면 됩니다. 앞에서 스위치를 설명드리면서 배운 거 기억나시죠?

그림에서 보이는 빈 공간은 여러 가지 모듈들을 설치할 수 있도록 만들어진 공간입니다. 이곳에 앞에서 설명드린 스위치나 서버, 무선, 음성 지원 등 다양한 서비스 모듈을 설치하게 되면 이제 라우터는 라우터의 기본 기능 이외에도 여러 가지 서비스가 가능해지고, 이로써 진정한 ISR(Integrated Services Router)로 탄생하게 되는 겁니다. 이런 라우터를 모듈형 라우터라고 한다는 것도  알아두시면 좋겠네요.

자, 이제 대충 겉을 살펴봤으니 안을 들여다 볼까요?

한번 뜯어보겠습니다.

![](./img/1-7/ex31.jpg)

먼저 RAM(램)이라고 보이시죠? 최대 16기가까지의 램을 장착할 수 있도록 구성되어 있답니다.  
예전에 만났던 라우터에 비해 최근 출시된 라우터들은 당연히 RAM의 용량도 점점 커지는데, 그건 더 많은 일을 더 빨리 해야 하기 때문일 겁니다.

또 하나 특이한 게 바로 컨트롤 플레인(Control Plan)과 데이터 플레인(Data Plan)입니다. 전에는 라우터를 열어보면 그냥 CPU가 하나 있었는데, 이제는 CPU가 하나가 아니고 두 개가 보입니다.

자, 그럼 컨트롤 플레인은 뭐고, 또 데이터 플레인은 무슨 일을 하는 녀석일까요?

자세히 알아보면 복잡하니까 여기서는 쉽게 알아보자면 컨트롤 플레인은 조금 복잡한 일을 담당합니다. 예를 들어 어떤 특정 트래픽을 막아주거나, 더 빨리 가게 해주거나, 뭔가 복잡한 기능을 더 해주는 등 라우터가 하는 일 중 고급스러운(?) 일을 주로 담당하는 곳이 컨트롤 플레인입니다.  
반면 데이터 플레인은 말 그대로 데이터의 전송에만 집중합니다. "너는 이쪽에서 왔으니 저쪽으로 가라."와 같이 데이터를 최대한 빨리 보낼 수 있도록 하는 일을 담당하게 된답니다.

이렇게 데이터 제어를 담당하는 컨트롤 플레인과 데이터 전송을 담당하는 데이터 플레인을 나눠놓게 되면 일을 나눠서 할 수 있게 되어 빠르고 효과적인 라우팅 서비스가 가능하다는 장점도 있습니다.  
이 밖에도 필요한 서비스가 추가될 때마다 모든 라우터를 바꾸지 않고도 컨트롤 플레인의 성능만 올려주면 된다는 또 다른 장점도 있습니다.

사실 이 밖에도 이처럼 컨트롤 플레인과 데이터 플레인을 나눈 이유는 SDN(Software Defined Network)이라는 큰 트렌드를 기반으로 하는 이유도 있지만, SDN은 여러분이 네트워크에 대한 지식을 좀 더 쌓은 후 이해할 수 있는 내용이기 때문에 여기서는 잠시 넘어가도록 하겠습니다.

이렇게 처음 설명드린 Cisco 2501부터 방금 설명드린 ISR 4K까지 다양한 종류의 라우터가 있지만, 이렇게 전혀 다른 라우터들도 시스코라는 한 지붕에 사는 가족이다 보니 모드 같은 OS를 사용한답니다. (여기서 OS 부분은 현재 조금 달라진 부분이 있지만, 여러분들은 같은 OS를 사용한다고 알아두셔도 된답니다.)

그게 바로 IOS죠.

그래서 앞에서 설명드린 대로 라우터는 달라도 명령어는 모두 똑같답니다.

따라서 여러분들이 지금부터 라우터에 대해 잘 배워두시면 나중에 실전에 나가서 다른 시스코 라우터를 만나더라도 전혀 긴장하거나 겁 먹을 필요가 없습니다. 그저 하던 대로 침착하게 만져주면 되는 겁니다.

자, 그럼 요즘 라우터도 잠깐 구경했으니 다시 진도를 나가볼까요?



## 내가 가진 라우터의 현재 정보는 모두 이곳에!

앞에서 라우터에는 여러 가지 메모리들이 있고 각각은 나름대로의 임무를 띠고 있다는 것을 배웠습니다. 따라서 라우터의 이런 메모리들에 대한 상태를 제대로 보고 관리하는 것은 라우터를 제대로 관리하는 데 가장 중요하다고 해도 과언이 아닐 겁니다.

이번에는 라우터의 각종 정보(주로 메모리의 정보)를 보는 명령어(물론 시스코 라우터의 경우)를 알아보도록 하겠습니다. 그림을 보면 먼저 라우터의 각종 메모리에는 어떤 내용이 들어있는지를 알 수 있습니다.

![](./img/1-7/ex32.jpg)

![](./img/1-7/ex33.jpg)

먼저 라우터의 기본적인 내용, 즉 사용하는 소프트웨어의 버전이라든지, 아니면 가지고 있는 인터페이스의 종류, 그리고 IOS가 어디서 부팅했는지 등에 관한 전반적인 내용을 볼 수 있는 명령이 바로 show version입니다.  
아마 라우터를 사용해본 분이라면 자주 사용하는 명령 중 하나일 것입니다. 다음은 라우터에서 show version 명령을 내렸을 때입니다.

![](./img/1-7/ex34.jpg)

굵은 글자로 표시한 것이 여러분이 알아두면 편리한 것들입니다. 우선 IOS (tm) 3600 Software (C3620-JS-M), Version 11.2(14)P를 보면 '아! 이 라우터가 3600 시리즈 라우터구나'와 '이 라우터의 IOS 버전은 11.2(14)P 버전이구나'하는 것을 알 수 있습니다.  
즉 라우터의 IOS 버전을 알 수 있는 것이 바로 show version입니다.

또한 System image file is "flash:c3620-js-mz.112-14.P", booted via flash에서는 현재 IOS 이미지가 플래시 메모리에 저장되어 있고, 이 파일의 이름이 바로 c3620-jsmz.112-14.P라는 것을 알 수 있습니다.

![](./img/1-7/ex35.jpg)

이것은 이 라우터가 가지고 있는 인터페이스에 대한 정보를 알게 해줍니다. 즉 1개의 Fast Ethernet 인터페이스와 4개의 시리얼 인터페이스를 가지고 있는 것을 알 수 있습니다.

![](./img/1-7/ex36.jpg)

NVRAM이 29K라는 것과 플래시 메모리의 용량이 8메가라는 것을 알려줍니다. 그리고 맨 마지막에 있는 Configuration register is 0x2102 라우터의 IOS가 어떻게 부팅했는지, 그리고 어떤 구성 파일을 사용했는지 등에 대한 정보를 가지고 있습니다.  
여기서 0x의 의미는 16진수를 의미하고 뒤에 나오는 2102는 하나하나 그 의미를 가지고 있는데, 자세한 내용은 다시 알아보기로 하고 우선은 가장 일반적인 레지스터 값이 0x2102라는 것만 알아두기 바랍니다.



![](./img/1-7/ex37.jpg)

그다음이 show interface입니다. 말 그대로 현재 이 라우터가 가지고 있는 모든 인터페이스가 다 보일 뿐만 아니라 그 인터페이스의 현재 상황까지도 상세하게 알 수 있는 명령입니다.

여기에서 인터페이스란, 예를 들어 시스코 2501 라우터의 경우 이더넷 1개와 시리얼 인터페이스 2개로 구성되어 있는데, 이런 것들을 말합니다. 쉽게 말씀드려서 라우터 외부에 네트워크와 붙이려고 만들어 놓은 장치들이라고 생각하면 됩니다.

아무튼 우리가 라우터를 설치한다고 하는 말은, 다시 말해서 라우터의 인터페이스를 어디에다 붙인다 하는 말과 같다고 봐도 됩니다. 그러니까 이 인터페이스의 상태를 보는 show interface 명령은 그만큼 중요한 명령입니다.  
제 생각으로는 라우터를 만지면서 가장 많이 사용하는 명령이 바로 show interface가 아닐까 합니다.

show interface 명령은 특정의 인터페이스를 지정해서 사용할 수도 있습니다. 예를 들어 라우터 전체의 인터페이스를 보는 것이 아니고 특정한 인터페이스만 보고 싶은 경우는 show interface 뒤에 인터페이스 이름을 넣어줍니다. show interface ethernet 0이라는 명령은 이더넷 인터페이스 0번만을 보여달라는 의미입니다.  
물론 이 명령으로 인터페이스가 지금 살아있는지, 죽었는지도 확인할 수 있습니다.

다음의 예는 시스코 3600 라우터에서 show interface serial 0/0을 했을 때입니다.

![](./img/1-7/ex38.jpg)

아직 다른 것은 물라도 Serial0/0 is down, line protocol is down은 알아두면 도움이 될 겁니다. 즉 여기서 시리얼 인터페이스가 제대로 동작하려면 Serial0/0 is up, line protocol is up이 되어야 한다는 것입니다. 지금은 둘다 down이기 때문에 이 인터페이스는 제대로 동작하지 않음을 의미합니다.

![](./img/1-7/ex39.jpg)

이번에는 라우터에서 현재 돌아가고 있는 구성(Configuration) 파일을 볼 때는 어떤 명령을 쓰는지 알아보기로 하겠습니다.

구성 파일에는 2가지 종류가 있습니다.

1가지는 메모리에서 돌아가는 실질적인 구성 파일이고, (Active Configuration File 또는 Running Configuration File이라고 합니다.) 또 하나는 NVRAM에 저장되어 있는 백업 구성 파일입니다. (Backup Configuration File 또는 Startup Configuration File이라고 합니다.)  
이 두 개의 구성 파일은 서로 같을 수도 있고, 또 서로 다를 수도 있습니다.

만약 지금 시스코 라우터를 만지는 엔지니어 분이라면 아마 이 미묘한 차이를 잘 알고 계실 겁니다. 따라서 이 2가지의 차이점을 잘 이용하면 정말 편안한 구성이 가능하지만, 만약 잘못 이용하면 씻을 수 없는(?) 실패를 경험하게 될 수도 있습니다.

아무튼 나중에 더 알아보기로 하고 현재의 구성 파일을 보는 명령은 show running-configuration 명령입니다.

너무 길다구요? 그럼 이렇게만 치세요.

![](./img/1-7/ex40.jpg)

저 역시 이것만 입력합니다. 그런데 여러분은 show run 대신 write terminal(write term)이라고 해도 같은 결과, 즉 현재 구성 파일을 볼 수 있을 겁니다. 이 명령은 전에 사용되던 명령입니다. 

이번에는 NVRAM에 저장되어 있는 백업 구성 파일을 보는 명령입니다.

show startup-configuration이라고 치거나 간단히 sh start 또는 sh config라고 쓰면 됩니다. 뭐 이렇게 명령이 많냐고 불평하는 분이 있을 텐데 이것은 라우터의 소프트웨어 버전이 바뀌면서 달라진 겁니다.

그러니까 사용하기 편한 것으로 하는데 기왕이면 새 버전이 좋겠죠? 새 버전은 show start입니다.



> 알고 갑시다!

**자, 이 2가지 구성 파일을 보는 명령에 대한 정리를 해볼까요?**

구성 파일의 종류에는 현재 구성 파일과 백업 구성 파일이 있다.  
현재 구성 파일을 보려면 라우터에서 show run이라고 치면 된다.  
백업 구성 파일을 보려면 라우터에서 show start라고 치면 된다.

이 명령은 기본이니까 꼭 기억해 두기 바랍니다.



![](./img/1-7/ex41.jpg)

이 명령은 플래시 메모리를 보는 명령입니다. 전에 말씀드린 대로 플래시 메모리에는 IOS의 이미지 정보가 들어 있습니다. 이 정보를 보고 싶을 때 또는 이곳에 있는 이미지를 백업받거나 업그레이드하고 싶을 때 먼저 이 IOS 이미지 파일에 대한 내용을 알아야 하기 때문에 사용하는 명령입니다. 'show flash'라고 입력하면

![](./img/1-7/ex42.jpg)

우와 같이 현재 플래시에 있는 파일 이름, 즉 여기에서는 c800-g3-mw.120-3.T1이 이미지 파일 이름입니다. 이 파일이 차지하는 크기는 약 2.4메가 정도 됩니다. 그리고 플래시 전체 용량은 약 12메가, 사용할 수 있는 공간은 약 10메가 정도라는 것을 알 수 있습니다.



![](./img/1-7/ex43.jpg)

이 명령은 현재 라우터의 동작 상태를 보여주는데, 이 명령을 입력하면 현재 라우터의 5분, 1분, 5초 동안의 CPU 로드가 퍼센트로 나타나기 때문에 라우터가 얼마나 일을 하고 있는지를 알 수 있는 명령이기도 합니다.  
다음은 라우터에서 show processes cpu 명령을 수행했을 때를 보여줍니다.

![](./img/1-7/ex44.jpg)

이외에도 라우팅 테이블을 프로토콜별로 보는 명령인 show ip route 같은 명령어도 있는데, 이런 것들은 다음에 자세히 알아보기로 하겠습니다. 제 경험상 너무 많이 알아도 다 잊어버리므로 일단 우리가 지금 배운 것까지만 알고 넘어가서 잊어버리지 않도록 하는 것이 더 좋을 것 같습니다.  
여기에서 배운 show version, show interface, show run, show config, show flash, show processes cpu 명령은 잊지 말고 다음으로 넘어갔으면 합니다.



## 라우터 셋업 모드

자, 그럼 이제부터는 지금까지 배운 많은(?) 라우터에 대한 지식을 바탕으로 라우터에 명령을 직접 입력해 보도록 하겠습니다. 마치 운전면허를 준비할 때 이론 공부를 마치고 직접 차에 올라타는 것과 같은 겁니다.  
만약 이 부분을 이미 다 아는 분이라도 정리니까 다시 한 번 복습해보도록 하고, 또 처음 보는 분은 물론 열심히 하셔야겠죠?

맨 먼저 라우터를 처음 구입했다고 가정하면, 그래서 그 라우터에 어떤 구성도 되어있지 않다면 라우터는 부팅 후에 바로 바로 셋업(setup) 모드로 들어갑니다.

셋업 모드란 무엇일까요? 전에 라우터의 모드에 대해 공부했던 것을 기억하죠? 셋업 모드는 가장 쉬운 라우터의 세팅 모드입니다. 즉 하나하나 질문을 하면서 그 질문에 대한 대답을 바탕으로 라우터의 구성 파일을 만드는 겁니다.

시스코 라우터의 셋업 모드를 한번 볼까요?

![](./img/1-7/ex45.jpg)

이렇게 시작됩니다. 밑에서 두 번째 줄에 보니까 다이얼로그 방식으로 구성하겠냐고 물어보네요. 거기서 'yes'를 선택하면 바로 질문을 통한 구성 방식이 시작됩니다.  
먼저 전체 인터페이스 상황을 보여주겠다고 하죠? 그다음에도 질문은 계속됩니다. 라우터 이름은 뭐로 할래? 패스워드는 뭐로 쓸래? 또 라우팅 프로토콜은 뭐로 할래?

이것저것 질문해서 우리가 대답을 하면 라우터는 자동으로 구성 파일, 즉 'configuration file'을 만듭니다. 구성 파일을 다 만들고 난 다음에는 마지막으로 여러분께 한번 보여줄 겁니다. 이렇게 만들었는데 이것을 구성 파일로 사용할 것인가를 말입니다.  
"저장할래?" 이렇게 물어보죠. 그래서 우리가 "그래, 저장할게"라고 대답하면 그다음부터는 그 구성 파일이 저장되고, 우리가 이 다음에 라우터를 껐다가 켜도 셋업 모드로 들어가지 않게 됩니다. 어때요? 셋업 모드에 대해 이해가 가시죠?

여기까지 간단하게 정리를 해보면 셋업 모드는 라우터에 어떤 구성 파일도 저장되어 있지 않을때 라우터가 이를 인식하고 자동으로 들어가는 모드이고, 이 모드에서는 질문과 답변을 통해서 라우터가 자동으로 구성 파일을 만든다. 여기까지입니다.

네? 질문 있으시다구요? 그럼 셋업 모드로 다시 들어가고 싶다면 구성 파일을 다 지워야 하느냐구요? 아닙니다. 셋업 모드로 다시 들어가고 싶은 경우에는 프리빌리지드 모드(Privileged Mode)에서 setup이라고 입력하면 됩니다. (유저 모드에서는 안 되는거 다 아시죠?)

![](./img/1-7/ex46.jpg)

그럼 이제부터는 셋업 모드를 이용해서 직접 구성하는 것을 하나씩 해보도록 하겠습니다.

![](./img/1-7/ex47.jpg)

여기서 첫 번째 질문이 나왔습니다. Dialog 방식, 즉 대화식으로 구성을 하겠느냐고 물어봤습니다. 여기에서는 디폴트 값이 Yes입니다.  
따라서 대화식으로 구성을 하고 싶은 경우에는 그냥 `Enter`를 치시면 됩니다. 물론 'Yes'라고 또 입력하셔도 아무 문제가 없습니다. 여기서 'No'라고 입력하거나 `ctrl`+`C`를 누르면 셋업 모드에서 빠져나오게 됩니다.

![](./img/1-7/ex48.jpg)

그다음 질문은 현재 이 라우터의 인터페이스를 보겠느냐 하는 겁니다. 여기서 디폴트 값은 Yes입니다. 따라서 그냥 `Enter`를 치면 현재의 인터페이스 상황이 보입니다.  
이 라우터는 가지고 있는 인터페이스는 이더넷 1개, 그리고 시리얼 2개입니다. 그리고 모든 인터페이스에는 아직 IP 주소 세팅이 되어 있지 않고, 또 상태는 모두 다운이라는 것도 알 수 있습니다.

![](./img/1-7/ex49.jpg)

그다음은 글로벌 파라미터, 즉 일반적인 세팅을 하는 단계입니다. 가장 먼저 라우터의 이름을 뭐로 할지를 물어보고 있습니다. 디폴트 값은 Router입니다. 따라서 우리가 따로 라우터의 이름을 만들어 주지 않으면 이것의 이름은 Router가 되는 겁니다.  
만약 우리가 이름을 주고 싶으면 옆에 라우터 이름을 넣어주면 됩니다. 여기서는 라우터 이름으로 Cisco-R이라는 이름을 사용했습니다.

![](./img/1-7/ex50.jpg)

그다음은 암호를 입력하는 곳입니다. 이곳은 특히 주의 깊게 보셔야 할 곳이기도 합니다. 종종 암호를 입력하고도 자신이 입력한 암호를 잊어버려서 라우터에 들어가지 못하는 경우가 있습니다.  
중요한 암호니까 남들에게도 알려주지 않으므로 잊어버리고 고생을 많이 하는 경우가 있습니다. 여기서 입력하는 암호는 유저 모드에서 프리빌리지드 모드로 넘어가는 암호입니다. 라우터의 모든 구성을 변경하기 위해서는 반드시 프리빌리지드 모드, 즉 운영자 모드로 들어가야 합니다.  
따라서 암호 중에서 가장 중요한 암호가 바로 이곳입니다. 여기서 알아야 할 암호는 바로 enable secret과 enable password입니다.

enable secret은 프리빌리지드 모드로 들어갈 때 가장 먼저 물어보는 암호입니다. 그런데 여러분이 나중에 보면 알겠지만 이 암호는 우리가 세팅하고 나면 나중에 자동으로 Encryption이 되는 특성이 있습니다.  
즉 구성 파일에서 암호를 보려고 해도 이상한 문자만 보입니다. 따라서 남들이 내 구성 파일을 보고 암호를 알아내려고 해도 이상하게 보이니까 암호를 알 수 없는 겁니다. 그러나 enable password는 구성 파일에서 보면 내가 원래 입력했던 값이 그대로 보입니다.

또 하나 중요한 것은 내가 만약 enable secret을 'korea'로 하고 enable password를 'cisco'로 정한 상태에서 유저 모드에서 프리빌리지드 모드로 들어가고자 할 때 사용하는 enable이라는 명령을 입력하면,

![](./img/1-7/ex51.jpg)

위와 같이 패스워드를 물어보게 되는데, 이때 enable password인 cisco를 입력하면 절대 들어 갈 수 없게 됩니다. 이때는 enable secret 값인 korea를 입력해야만 들어갈 수 있습니다.  
그럼 enable secret 값인 korea를 입력하고 또 enable password인 cisco를 넣어줘야 할까요?

답은 아닙니다. 즉 라우터는 enable secret과 enable password가 같이 존재하는 경우에는 항상 enable secret 값만을 확인합니다. 그러나 라우터에 enable secret이 세팅되어 있지 않은 경우에는 비로소 enable password 값을 물어보게 되는 겁니다.

![](./img/1-7/ex52.jpg)

라고 나와있는 말이 보이죠? 즉 enable secret이 있는 경우에는 enable password를 대치한다고 나와있습니다.
