# 포인터와 함수에 대한 이해

> 인자전달의 기본방식은 값의 복사이다!

__함수호출 시 전달되는 인자의 값은 매개변수에 복사가 된다.__

위 문장에서 핵심 단어는 __복사__ 이다. 즉 복사가 되는 것 뿐이기 때문에 함수가 호출되고 나면, 전달되는 인자와 매개변수는 별개가 된다.

```c
int	SimpleFunc(int num)
int main(void)
{
	int age = 17;
	SimpleFunc(age);		//age에 저장된 값이 매개변수 num에 복사됨
    ...
}
```

위 코드에서 SImpleFunc 함수의 호출을 통해 인자로 age를 전달하고 있다.  
그러나 실제로 전달되는 것은 age가 아닌, age에 저장된 값이다. 그리고 그 값이 num에 복사되는 것이다.  
이어서 함수호출 시 인자로 배열을 통째로 전달하는 방법에 대해서 생각해보자. 하지만 애석하게도 함수를 호출하면서 매개변수에 배열을 통째로 넘겨주는 방법은 존재하지 않는다.  

그 이유는__매개변수로 배열을 선언할 수 없기 때문이다.__

배열을 통째로 넘겨받으려면 매개변수로 배열을 선언할 수 있어야 한다. 하지만 이것이 허용되지 않으니 배열을 통째로 넘기는 것은 불가능한 일이다.  
대신에 함수 내에서 배열에 접근할 수 있도록 배열의 주소값을 전달하는 것은 가능하다.



> 배열을 함수의 인자로 전달하는 방식

배열을 통째로 전달하는 것이 불가능하다면, 배열의 주소값을 인자로 전달해서 이를 통해서 접근하도록 유도하는 방법을 생각해 볼 수 있다.  
예를 들어서 아래와 같은 배열이 있다면

```c
int arr[3] = {1, 2, 3};
```

다음의 형태로 함수를 호출하면서 배열의 주소 값을 전달할 수 있다.

```c
SimpleFunc(arr);		// Simplefunc 함수를 호출하면서 배열 arr의 주소 값 전달
```

그렇다면 SimpleFunc 함수의 매개변수는 어떻게 선언되어야 하겠는가?

```c
void SimpleFunc(int * param) {....}
```

매개변수 param을 이용해서 배열에는 어떻게 접근해야 하는가? 포인터 변수를 이용해도 배열의 형태로 접근이 가능하니, 다음과 같이 접근이 가능하다.

```c
printf("%d %d", param[1], param[2]);		// 두 번째, 세 번째 요소 출력!
```

지금까지 설명한 내용을 하나의 예제로 나타내보자.



ArrayParam.c

```c
#include <stdio.h>

void	ShowArayElem(int *param, int len)
{
    int i;
    for(i=0; i<len; i++)
        printf("%d ", param[i]);
    printf("\n");
}

int main(void)
{
    int arr1[3] = {1, 2, 3};
    int arr2[5] = {4, 5, 6, 7, 8};
    ShowArayElem(arr1, sizeof(arr1) / sizeof(int));
    ShowArayElem(arr2, sizeof(arr2) / sizeof(int));
    return 0;
}
```



실행 결과

```
1 2 3
4 5 6 7 8
```



위 예제에서는 ShowArayElem 함수 내에서 외부에 선언된(main 함수 내에 선언된)배열에 접근하여 그 값을 출력하였다. 그렇다면 값의 출력이 아닌 변경도 가능한가? 물론 가능하다.  
주소 값만 알면 해당 메모리 공간에 얼마든지 접근이 가능하다. 예제를 통해 살펴보자.



ArrayParamAccess.c

```c
#include <stdio.h>

void	ShowArayElem(int *param, int len)
{
	int i;
	for(i=0; i<len ; i++)
		printf("%d ", param[i]);
	printf("\n");
}

void	AddArayElem(int *param int len, int add)
{
	int i;
	for(i=0; i<len ; i++)
		param[i] += add;
}

int	main(void)
{
	int arr[3] = {1, 2, 3};
	AddArayElem(arr, sizeof(arr) / sizeof(int), 1);
	ShowArayElem(arr, sizeof(arr) / sizeof(int));
	
	AddArayElem(arr, sizeof(arr) / sizeof(int), 2);
	ShowArayElem(arr, sizeof(arr) / sizeof(int));
	
	AddArayElem(arr, sizeof(arr) / sizeof(int), 3);
	ShowArayElem(arr, sizeof(arr) / sizeof(int)));
	return 0;
}
```



실행 결과

```
2 3 4
4 5 6
7 8 9
```

