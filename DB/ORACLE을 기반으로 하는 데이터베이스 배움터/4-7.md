# 내포된 SQL

SQL은 강력한 선언적인 언어이다.  
SQL에서 질의를 작성하는 것은 일반적으로 고급 프로그래밍 언어(호스트언어)를 사용하여 동일한 질의를 코딩하는 것보다 간단하다.  
사용자의 관점에서 호스트 언어와 SQL을 함께 사용하여 데이터베이스를 접근하는 이유가 있다.  
SQL이 호스트 언어의 완전한 표현력을 갖고 있지 않기 때문에 모든 질의를 SQL로 표현할 수 는 없다.  
이런 질의를 표현하기 위해서는 SQL을 보다 강력한 언어에 내포시켜야 한다.  
SQL은 사용하기 쉬운 언어이지만 호스트 언어가 갖고 있는 조건문(IF문), 반복문(WHILE문),  
입출력 등과 같은 연산, 사용자와의 상호 작용, 질의 결과를 GUI로 보내는 등의 기능을 갖고 있지 않다. 

따라서 C, C++, 코볼, 자바 등의 언어로 작성하는 로그램에 SQL문을 삽입하여,  
데이터베이스를 접근하는 부분은 SQL이 맡고 SQL에 없는 기능은 호스트 언어로 작성하는 것이 필요하다.  
호스트 언어에 포함되는 SQL문을 __내포된 SQL__ 이라 부른다.

호스트 언어에 SQL문을 내포시켜 응용 프로그램을 작성하려면 프로그래머는 두 가지 언어에 익숙해야 한다.  
또한 두 언어 사이의 인터페이스와 데이터 타입 호환성, 에러 탐지,  
호스트 언어에서 제공하는 데이터 구조와 DBMS가 제공하는 __데이터 구조가 불일치 하는 문제(impedance mismatch 문제)__ 등을 해결해야 한다.  
내포된 SQL문의 또 다른 문제는 이식성이 높지 않다는 것이다.  
DBMS들마다 SQL문을 내포시키는 구문등에 다소 차이가 있다. 즉 서로 다른 DBMS마다 고유한 __전컴파일러(precompiler)__ 와 라이브러리를 사용하기 때문에  
한 DBMS를 사용하여 개발된 응용 프로그램을 다른 DBMS에서 사용하려면 응용 프로그램을 다시 컴파일해야 한다.

본 절에서는 오라클에서 C 프로그램에 SQL문을 내포시키는 환경을 가정하고 설명을 전개한다.  
이를 줄여서 __Pro*C__ 라 부르기로 한다.  
Pro\*C는 C 프로그래머가 데이터베이스 접근을 관리하는 환경에 적합하다.  
Pro\*C는 SQL문을 포함한 C 소스 프로그램을 받아들여 그 속에 삽입된 SQL문을  
__오라클 런타임 라이브러리__ 호출로 변환하여, 수정된 C 소스 프로그램을 생성하는 전컴파일러이다.  
사용자는 수정된 이 소스 프로그램을 C 컴파일러를 사용하여 컴파일하고, 링크하고, 수행한다.  
일반적으로 내포된 SQL문이 포함된 소스 파일의 확장자는 .pc이다.  
이 파일을 Pro\*C를 통하여 전컴파일하면 확장자가 .c인 C 소스 프로그램이 생성된다.  
Pro\*C++는 C++ 프로그램에 SQL문을 내포시킬 때 사용하는 전컴파일러이다.

