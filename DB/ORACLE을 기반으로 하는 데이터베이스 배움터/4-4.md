# SELECT 문

SELECT문은 관계 대수의 실렉션과 의미가 완전히 다르다.

SQL의 SELECT문은 관계 대수의 실렉션, 프로젝션, 조인, 카티션 곱 등을 결합한 것이다.

SELECT문은 관계 대수에서 가장 자주 사용된다.



## 목차

- [기본적인 SELECT문](#기본적인-SELECT문)
- [조인](#조인)
- [중첩 질의](#중첩-질의)



## 기본적인 SELECT문

```sql
(필수) SELECT		[DISTINCT] 애트리뷰트(들)
(필수) FROM		릴레이션(들)
(선택) [WHERE	조건
						[중첩 질의]]
(선택) [GROUP BY	애트리뷰트(들)]
(선택) [HAVING	조건]
(선택) [ORDER BY	애트리뷰트(들) [ASC|DESC]];
```



- SELECT절

  SELECT절에는 질의 결과에 포함하려는 애트리뷰트들의 리스트를 열거한다.
  관계 대수의 프로젝션 연산에 해당한다.

  사용자가 DISTINCT절을 사용해서 명시적으로 요청했을 때만 중복을 제거한다.
  DISTINCT는 관계 대수와 SQL간의 중요한 차이점을 나타낸다.

  SQL의 릴레이션은 디폴트로 투플들의 집합이 아니고, 투플들의 __다중집합(multiset)__ 을 허용한다.
  다중집합을 백(bag)이라고도 부른다.

  

- FROM절

  질의에서 필요로 하는 릴레이션의 리스트를 열거한다.

  SELECT절에서 사용자가 검색하려는 애트리뷰트들을 포함하고 있는 릴레이션들뿐만 아니라WHERE절의 프레디키트에 사용된 애트리뷰트들을 포함하고 있는 릴레이션들도 열거 해야 한다.

  

- WHERE절

  WHERE절은 관계 대수의 실렉션 연산의 프레디키트(실렉션 조건)에 해당한다.

  FROM절에 열거한 릴레이션에 속하는 애트리뷰트들만 사용해서 프레디키트를 표현해야 한다.

  WHERE절의 조건은 결과 릴레이션의 투플들이 만족시켜야 하는 조건이다.
  예를 들어, WHERE SALARY > 150000은 결과 릴레이션의 투플들의 급여가 150000보다 크다는 것이다.

  WHERE절의 프레디키트는 아래와 같은 사항들을 포함한다.

  > 비교 연산자			=, <>, <, <=, >, >=
  >
  > 부울 연산자			AND, OR, NOT
  >
  > 집합 연산자			IN, NOT IN, ANY (SOME), ALL

  프레디키트는 비교 연산자와 부울 연산자 등이 결합된 복잡한 형태도 가능하다.

  만일 WHERE절을 생략하면 모든 투플들이 조건을 만족하는 것으로 간주한다.

  WHERE절은 SELECT문뿐만 아니라 UPDATE문과 DELETE문에도 사용되는데, WHERE절의 구문은 모두 동일하다.

- 중첩 질의

  중첩 질의는 다른 질의의 WHERE절에 포함된 SELECT문이다.

  

- GROUP BY절

  질의 결과에서 GROUP BY 다음에 명시된 애트리뷰트에 동일한 값을 갖는 투플들을 한 그룹으로 묶는다.

  

- HAVING절

  HAVING절은 투플들의 그룹이 만족해야 하는 조건을 나타낸다.

  

- ORDER BY절

  ORDER BY절은 결과 투플들의 정렬 순서를 지정한다.

  ORDER BY절을 생략하면 SELECT문의 결과로 검색된 투플들의 순서는 기본 키의 순서나 투플들이 검색된 순서를 따른다.



여섯 개의 절이 모두 사용된 SELECT문이 수행되는 개념적인 순서는  
FROM절에 열거된 릴레이션들의 카디션 곱을 구하고,  
WHERE절의 프레디키트를 적용하여 투플들을 골라내고,  
GROUP BY절에 의해 결과 투플들을 그룹화하고,  
각 그룹에 HAVING절의 조건을 적용하여 일부 그룹을 걸러내고  
남은 각 그룹에 집단 함수를 적용하고,  
SELECT절에 열거된 애트리뷰트들만 프로젝션해서 ORDER BY절에 명시된 순서대로 정렬한다.

