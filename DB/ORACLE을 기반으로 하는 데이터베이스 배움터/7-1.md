# 정규화 개요

좋은 관계 데이터베이스 스키마를 설계하는 목적은 정보의 중복과 갱신 이상이 생기지 않도록 하고, 정보의 손실을 막으며, 실세계를 훌륭하게 나타내고,  
애트리뷰트들간의 관계가 잘 표현되는 것을 보장하며, 어떤 무결성 제약조건의 시행을 간단하게 하며, 아울러 효율성 측면도 고려하는 것이다.  
실세계를 훌륭하게 나타낸 설계는 직관적으로 이해하기 쉬우며, 미래의 성장에 잘 대비할 수 있는 설계를 의미한다.  
먼저 갱신 이상이 발생하지 않도록 노력하고, 그 다음에 효율성을 고려한다.

ER 데이터 모델을 기반으로 고수준의 스키마를 생성하고, 이 설계를 릴레이션의 집합으로 사상한 후에 함수적 종속성을 기반으로 릴레이션들을 재구성한다.  
릴레이션을 재구성할 때 릴레이션을 어떻게 분해하는가에 따라 좋은 분해와 나쁜 분해로 구분할 수 있다. 나쁜 분해는 정보의 손실을 초래한다.  
좋은 분해에서는 분해된 릴레이션들을 조인하면 원래의 릴레이션을 만들어낼 수 있다.

관계 데이터 모델을 제안한 E. F. Codd는 검색 및 갱신 문제를 유발하는 릴레이션의 구조적인 특징들을 밝혀냈다.  
정보의 중복은 나쁜 릴레이션 스키마로부터 발생되는 많은 문제들의 원인이 된다.  
아래의 문제들 중에서 수정 이상, 삽입 이상, 삭제 이상을 총칭하여 갱신 이상이라고 부른다.

- 정보의 중복

  정보의 중복은 동일 정보를 두 곳 이상에 저장하는 것을 말한다.

- 수정 이상(modification anomaly)

  반복된 데이터 중에 일부만 수정하면 데이터의 불일치가 발생한다.

- 삽입 이상(insertion anomaly)

  불필요한 정보를 함께 저장하지 않고는 어떤 정보를 저장하는 것이 불가능하다.

- 삭제 이상(deletion anomaly)

  유용한 정보를 함께 삭제하지 않고는 어떤 정보를 삭제하는 것이 불가능하다.

```
예: 나쁜설계1
아래 그림과 같은 구조와 내용을 갖는 사원 릴레이션으로부터 설계를 시작한다고 가정해보자.
그림의 사원 릴레이션은 회사의 사원에 관한 정보를 저장하는 릴레이션이다.
이 회사에서는 각 사원이 두 개까지의 부서에 속할 수 있다.
```

![](./image/7-1/ex1.jpg)

```
각 사원마다 존재하는 하나의 투플은 그 사원이 속한 부서에 관한 정보를 두 개까지 나타낸다.
예를 들어, 김창섭 사원은 영업부와 기획부 두 곳에서 근무하고 있다.
현재 한 부서에만 속해 있던 사원 박영권이 또 다른 부서에도 발령을 받으면 박영권에 관한 정보(사원이름, 사원번호, 주소, 전화번호)는 반복할 필요 없이, 기존의 투플에 부서 정보를 추가로 나타내면 된다.
그러나 이 릴레이션에는 심각한 단점들이 있다.
첫째, 릴레이션의 투플이 길고 다루기 힘들다.
둘째, 각 사원마다 두 개까지의 부서에 속할 수 있도록 릴레이션을 생성했는데, 회사의 방침이 바뀌어 사원이 세 개 이상의 부서에 속할 수 있게 되면 어떻게 처리할 것인가?
SQL의 ALTER TABLE문을 사용하여 사원 릴레이션에 부서에 관한 애트리뷰트를 추가하거나, 더 많은 부서 정보를 가진 새로운 사원 릴레이션을 생성한 후에 기존의 사원 릴레이션의 투플들을 읽어서 새로운 릴레이션에 삽입하고, 기존의 사원 릴레이션은 제거해야 한다.
셋째, 각 사원이 속한 부서의 평균 개수가 각 사원이 속할 수 있는 최대 부서 수보다 적을 때는 부서 정보에 널값이 들어 있는 경우가 많아지므로 기억 장소 낭비가 초래된다.
```

