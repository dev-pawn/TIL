# 단일 단계 인덱스

만일 화일에 대한 접근이 일괄 방식으로 순차 접근만 한다면 어떤 종류의 인덱스도 거의 불필요하다.  
인덱스된 순차 화일은 인덱스를 통해서 임의의 레코드를 접근할 수 있는 화일이다.  
인덱스 자체가 화일을 의미하므로 '인덱스 화일'이라고 할 필요는 없다.

단일 단계 인덱스의 각 엔트리는

__< 탐색 키, 레코드에 대한 포인터>__

로 이루어진다. 엔트리들은 탐색 키 값의 오름차순으로 정렬된다. 인덱스는 DBMS가 화일 내의 특정 레코드들을 빠르게 찾을 수 있도록 하는 데이터 구조이므로 인덱스를 통하여 질의를 수행하면 응답 시간이 향상된다. (아래 그림 참고)

디스크 접근 시간이 주기억 장치 접근 시간에 비해서 매우 크고 대부분의 데이터베이스 응용에서 디스크 접근을 많이 요구하므로, 인덱스를 통해 디스크 접근 횟수를 줄이면 데이터베이스의 성능을 크게 향상시킬 수 있다.

![](./image/6-5/ex1.jpg)

인덱스는 임의 접근을 필요로 하는 응용에 적합하다. 인덱스는 데이터 화일과는 별도의 화일에 저장된다.  
데이터 화일에 들어 있는 여러 애트리뷰트들 중에서 탐색 키에 해당하는 일부 애트리뷰트만 인덱스에 포함되기 때문에  
인덱스의 크기는 데이터 화일의 크기에 비해 훨씬 작으며, 흔히 데이터 화일 크기의 10 ~ 20% 정도가 된다.  
또한 하나의 화일에 여러 개의 인덱스들을 정의할 수 있다.

아래 그림은 EMPLOYEE 화일의 EMPNO에 정의된 인덱스를 보여준다. 인덱스는 <EmpnoIndex, Pointer> 형식의 엔트리들로 이루어지며,  
EmpnoIndex의 값이 증가하는 순서대로 엔트리들이 정렬되어 있다. 앞의 EMPLOYEE 릴레이션의 정의를 보면 한 레코드이 길이가 36바이트이다. EmpnoIndex 필드의 길이가 4바이트이므로, 인덱스의 Pointer의 길이를 4바이트라고 가정하면 인덱스의 한 엔트리의 길이는 8바이트이다. 따라서 EMPLOYEE 화일의 크기보다 인덱스의 크기가 훨씬 작다.

![](./image/6-5/ex2.jpg)

인덱스가 정의된 필드를 탐색 키라고 부른다. 탐색 키의 값들은 후보 키처럼 각 투플마다 반드시 고유하지는 않다.  
즉 후보 키와 달리 두 개 이상의 투플들이 동일한 탐색 키 값을 가질 수 있다. 탐색 키라는 용어에 포함된 '키' 를 지금까지 사용해온 '키'와 혼동하지 않기를 바란다.  
키를 구성하는 애트리뷰트뿐만 아니라 어떤 애트리뷰트도 탐색 키로 사용될 수 있다.

인덱스가 데이터 화일보다 크기가 작으므로 인덱스를 순차적으로 찾는 시간은 데이터 화일을 순차적으로 탐색하는 시간보다 적게 걸린다.  
더욱이 인덱스의 엔트리들은 탐색 키 값의 오름차순으로 저장되어 있으므로 이진 탐색을 이용할 수도 있다.(아래 그림 참고) 이진 탐색을 이용하면 탐색 시간이 훨씬 적게 소요된다.

![](./image/6-5/ex3.jpg)

인덱스를 사용하면 한 화일에서 특정 레코드를 찾기 위해서 모든 레코드들을 탐색할 필요가 없으므로 특히 화일이 매우 클 경우에 유용하다.  
인덱스 전체를 주기억 장치에 유지할 수 있을 때 특히 인덱스가 성능에 도움이 된다. 어떤 레코드를 찾는 질의도 한 번의 디스크(데이터 화일에 대한) 접근만 필요로 한다.

인덱스의 유형은 크게 단일 단계 인덱스와 다단계 인덱스로 구분한다. B+-트리 인덱스는 관계 DBMS에서 가장 널리 사용되는 다단계 인덱스 구조이다.  
다단계 인덱스는 다음 절에서 자세하게 논의한다. 단일 단계 인덱스에는 아래와 같은 유형들이 있다.



## 목차

- [기본 인덱스(primary index)](#기본-인덱스primary-index)
- [클러스터링 인덱스(clustering index)](#클러스터링-인덱스clustering-index)
- 보조 인덱스(secondary index)
- 희소 인덱스(sparse index)
- 밀집 인덱스(dense index)
- 희소 인덱스와 밀집 인덱스 비교
- 클러스터링 인덱스와 보조 인덱스의 비교



## 기본 인덱스(primary index)

탐색 키가 데이터 화일의 기본 키인 인덱스를 기본 인덱스라고 부른다. 레코드들은 기본 키의 값에 따라 클러스터링된다.  
기본 인덱스는 기본 키의 값에 따라 정렬된 데이터 화일에 대해 정의된다. 기본 인덱스는 흔히 희소 인덱스로 유지할 수 있다.  
희소 인덱스는 데이터 화일을 구성하는 각 블록마다 하나의 탐색 키 값이 인덱스 엔트리에 포함된다.  
일반적으로 각 인덱스 엔트리는 블록 내의 첫 번째 레코드의 키 값(__블록 앵커__(block anchor)라고 부름)을 갖는다.

각 릴레이션마다 최대한 한 개의 기본 인덱스를 가질 수 있다. 아래 그림은 데이터 화일에 대한 기본 인덱스(또는 희소 인덱스)를 보여준다.  
데이터 화일의 레코드들을 저장하는 블록마다 두 개의 레코드가 들어 있다. 이에 반해서 인덱스 엔트리들을 저장하고 있는 블록마다 네 개의 엔트리들이 들어 있다.  
실제의 경우에는 데이터 블록당 레코드 수와 인덱스 블록당 엔트리 수는 훨씬 더 차이가 난다.

데이터 화일은 기본 키 값이 증가하는 순서로 정렬되어 있다. 각 데이터 블록의 첫 번째 레코드의 기본 키 값이 인덱스 엔트리에 포함된다.  
예를 들어, 첫 번째 데이터 블록에는 기본 키가 10, 20인 레코드가 들어 있는데, 이 중에서 기본 키 값 10이 인덱스에 포함된다.  
두 번째 데이터 블록에는 기본 키가 30, 40인 레코드가 들어 있는데, 이 중에서 기본 키 값 30이 인덱스 엔트리에 포함된다.

![](./image/6-5/ex4.jpg)



## 클러스터링 인덱스(clustering index)

